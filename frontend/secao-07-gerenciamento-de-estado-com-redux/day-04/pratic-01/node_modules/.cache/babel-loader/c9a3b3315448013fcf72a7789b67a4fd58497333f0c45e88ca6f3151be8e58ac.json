{"ast":null,"code":"'use strict';\n\nfunction _interopDefault(ex) {\n  return ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;\n}\nvar React = require('react');\nvar React__default = _interopDefault(React);\nvar PropTypes = _interopDefault(require('prop-types'));\nfunction parentPosition(element) {\n  var rect = element.getBoundingClientRect();\n  return {\n    x: rect.left,\n    y: rect.top\n  };\n}\nfunction parentHasClass(element, className) {\n  while (element) {\n    if (element.classList && element.classList.contains(className)) {\n      return true;\n    }\n    element = element.offsetParent;\n  }\n  return false;\n}\nfunction debounce(func, wait) {\n  var timeout = void 0;\n  return function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    var context = this;\n    clearTimeout(timeout);\n    timeout = setTimeout(function () {\n      return func.apply(context, args);\n    }, wait);\n  };\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\nvar ANIMATION_TIME = 300;\nvar DIAGONAL_THROW_TIME = 1500;\nvar SCROLL_PIXELS_FOR_ZOOM_LEVEL = 150;\nvar MIN_DRAG_FOR_THROW = 40;\nvar CLICK_TOLERANCE = 2;\nvar DOUBLE_CLICK_DELAY = 300;\nvar DEBOUNCE_DELAY = 60;\nvar PINCH_RELEASE_THROW_DELAY = 300;\nvar WARNING_DISPLAY_TIMEOUT = 300;\nvar NOOP = function NOOP() {};\nfunction wikimedia(x, y, z, dpr) {\n  var retina = typeof dpr !== 'undefined' ? dpr >= 2 : typeof window !== 'undefined' && window.devicePixelRatio >= 2;\n  return 'https://maps.wikimedia.org/osm-intl/' + z + '/' + x + '/' + y + (retina ? '@2x' : '') + '.png';\n}\n\n// https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames\nvar lng2tile = function lng2tile(lon, zoom) {\n  return (lon + 180) / 360 * Math.pow(2, zoom);\n};\nvar lat2tile = function lat2tile(lat, zoom) {\n  return (1 - Math.log(Math.tan(lat * Math.PI / 180) + 1 / Math.cos(lat * Math.PI / 180)) / Math.PI) / 2 * Math.pow(2, zoom);\n};\nfunction tile2lng(x, z) {\n  return x / Math.pow(2, z) * 360 - 180;\n}\nfunction tile2lat(y, z) {\n  var n = Math.PI - 2 * Math.PI * y / Math.pow(2, z);\n  return 180 / Math.PI * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n)));\n}\nfunction getMousePixel(dom, event) {\n  var parent = parentPosition(dom);\n  return [event.clientX - parent.x, event.clientY - parent.y];\n}\nfunction easeOutQuad(t) {\n  return t * (2 - t);\n}\n\n// minLat, maxLat, minLng, maxLng\nvar absoluteMinMax = [tile2lat(Math.pow(2, 10), 10), tile2lat(0, 10), tile2lng(0, 10), tile2lng(Math.pow(2, 10), 10)];\nvar hasWindow = typeof window !== 'undefined';\nvar performanceNow = hasWindow && window.performance && window.performance.now ? function () {\n  return window.performance.now();\n} : function () {\n  var timeStart = new Date().getTime();\n  return function () {\n    return new Date().getTime() - timeStart;\n  };\n}();\nvar requestAnimationFrame = hasWindow ? window.requestAnimationFrame || window.setTimeout : function (callback) {\n  return callback();\n};\nvar cancelAnimationFrame = hasWindow ? window.cancelAnimationFrame || window.clearTimeout : function () {};\nfunction srcSet(dprs, url, x, y, z) {\n  if (!dprs || dprs.length === 0) {\n    return '';\n  }\n  return dprs.map(function (dpr) {\n    return url(x, y, z, dpr) + (dpr === 1 ? '' : ' ' + dpr + 'x');\n  }).join(', ');\n}\nvar Map = function (_Component) {\n  _inherits(Map, _Component);\n  function Map(props) {\n    _classCallCheck(this, Map);\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n    _this.updateWidthHeight = function () {\n      if (_this._containerRef) {\n        var rect = _this._containerRef.getBoundingClientRect();\n        if (rect && rect.width > 0 && rect.height > 0) {\n          _this.setState({\n            width: rect.width,\n            height: rect.height\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n    _this.wa = function (e, t, o) {\n      return window.addEventListener(e, t, o);\n    };\n    _this.wr = function (e, t) {\n      return window.removeEventListener(e, t);\n    };\n    _this.bindMouseEvents = function () {\n      _this.wa('mousedown', _this.handleMouseDown);\n      _this.wa('mouseup', _this.handleMouseUp);\n      _this.wa('mousemove', _this.handleMouseMove);\n    };\n    _this.bindTouchEvents = function () {\n      _this.wa('touchstart', _this.handleTouchStart, {\n        passive: false\n      });\n      _this.wa('touchmove', _this.handleTouchMove, {\n        passive: false\n      });\n      _this.wa('touchend', _this.handleTouchEnd, {\n        passive: false\n      });\n    };\n    _this.unbindMouseEvents = function () {\n      _this.wr('mousedown', _this.handleMouseDown);\n      _this.wr('mouseup', _this.handleMouseUp);\n      _this.wr('mousemove', _this.handleMouseMove);\n    };\n    _this.unbindTouchEvents = function () {\n      _this.wr('touchstart', _this.handleTouchStart);\n      _this.wr('touchmove', _this.handleTouchMove);\n      _this.wr('touchend', _this.handleTouchEnd);\n    };\n    _this.bindResizeEvent = function () {\n      _this.wa('resize', _this.updateWidthHeight);\n    };\n    _this.unbindResizeEvent = function () {\n      _this.wr('resize', _this.updateWidthHeight);\n    };\n    _this.bindWheelEvent = function () {\n      if (_this._containerRef) {\n        _this._containerRef.addEventListener('wheel', _this.handleWheel, {\n          passive: false\n        });\n      }\n    };\n    _this.unbindWheelEvent = function () {\n      if (_this._containerRef) {\n        _this._containerRef.removeEventListener('wheel', _this.handleWheel);\n      }\n    };\n    _this.setCenterZoomTarget = function (center, zoom) {\n      var fromProps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var zoomAround = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      var animationDuration = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : ANIMATION_TIME;\n      if (_this.props.animate && (!fromProps || _this.distanceInScreens(center, zoom, _this.state.center, _this.state.zoom) <= _this.props.animateMaxScreens)) {\n        if (_this._isAnimating) {\n          cancelAnimationFrame(_this._animFrame);\n          var _this$animationStep = _this.animationStep(performanceNow()),\n            centerStep = _this$animationStep.centerStep,\n            zoomStep = _this$animationStep.zoomStep;\n          _this._centerStart = centerStep;\n          _this._zoomStart = zoomStep;\n        } else {\n          _this._isAnimating = true;\n          _this._centerStart = _this.limitCenterAtZoom([_this._lastCenter[0], _this._lastCenter[1]], _this._lastZoom);\n          _this._zoomStart = _this._lastZoom;\n          _this.onAnimationStart();\n        }\n        _this._animationStart = performanceNow();\n        _this._animationEnd = _this._animationStart + animationDuration;\n        if (zoomAround) {\n          _this._zoomAround = zoomAround;\n          _this._centerTarget = _this.calculateZoomCenter(_this._lastCenter, zoomAround, _this._lastZoom, zoom);\n        } else {\n          _this._zoomAround = null;\n          _this._centerTarget = center;\n        }\n        _this._zoomTarget = zoom;\n        _this._animFrame = requestAnimationFrame(_this.animate);\n      } else {\n        _this.stopAnimating();\n        if (zoomAround) {\n          var _center = _this.calculateZoomCenter(_this._lastCenter, zoomAround, _this._lastZoom, zoom);\n          _this.setCenterZoom(_center, zoom, fromProps);\n        } else {\n          _this.setCenterZoom(center, zoom, fromProps);\n        }\n      }\n    };\n    _this.distanceInScreens = function (centerTarget, zoomTarget, center, zoom) {\n      var _this$state = _this.state,\n        width = _this$state.width,\n        height = _this$state.height;\n\n      // distance in pixels at the current zoom level\n\n      var l1 = _this.latLngToPixel(center, center, zoom);\n      var l2 = _this.latLngToPixel(centerTarget, center, zoom);\n\n      // distance in pixels at the target zoom level (could be the same)\n      var z1 = _this.latLngToPixel(center, center, zoomTarget);\n      var z2 = _this.latLngToPixel(centerTarget, center, zoomTarget);\n\n      // take the average between the two and divide by width or height to get the distance multiplier in screens\n      var w = (Math.abs(l1[0] - l2[0]) + Math.abs(z1[0] - z2[0])) / 2 / width;\n      var h = (Math.abs(l1[1] - l2[1]) + Math.abs(z1[1] - z2[1])) / 2 / height;\n\n      // return the distance\n      return Math.sqrt(w * w + h * h);\n    };\n    _this.animationStep = function (timestamp) {\n      var length = _this._animationEnd - _this._animationStart;\n      var progress = Math.max(timestamp - _this._animationStart, 0);\n      var percentage = easeOutQuad(progress / length);\n      var zoomDiff = (_this._zoomTarget - _this._zoomStart) * percentage;\n      var zoomStep = _this._zoomStart + zoomDiff;\n      if (_this._zoomAround) {\n        var centerStep = _this.calculateZoomCenter(_this._centerStart, _this._zoomAround, _this._zoomStart, zoomStep);\n        return {\n          centerStep: centerStep,\n          zoomStep: zoomStep\n        };\n      } else {\n        var _centerStep = [_this._centerStart[0] + (_this._centerTarget[0] - _this._centerStart[0]) * percentage, _this._centerStart[1] + (_this._centerTarget[1] - _this._centerStart[1]) * percentage];\n        return {\n          centerStep: _centerStep,\n          zoomStep: zoomStep\n        };\n      }\n    };\n    _this.animate = function (timestamp) {\n      if (timestamp >= _this._animationEnd) {\n        _this._isAnimating = false;\n        _this.setCenterZoom(_this._centerTarget, _this._zoomTarget, true);\n        _this.onAnimationStop();\n      } else {\n        var _this$animationStep2 = _this.animationStep(timestamp),\n          centerStep = _this$animationStep2.centerStep,\n          zoomStep = _this$animationStep2.zoomStep;\n        _this.setCenterZoom(centerStep, zoomStep);\n        _this._animFrame = requestAnimationFrame(_this.animate);\n      }\n    };\n    _this.stopAnimating = function () {\n      if (_this._isAnimating) {\n        _this._isAnimating = false;\n        _this.onAnimationStop();\n        cancelAnimationFrame(_this._animFrame);\n      }\n    };\n    _this.limitCenterAtZoom = function (center, zoom) {\n      // [minLat, maxLat, minLng, maxLng]\n      var minMax = _this.getBoundsMinMax(zoom || _this.state.zoom);\n      return [Math.max(Math.min(isNaN(center[0]) ? _this.state.center[0] : center[0], minMax[1]), minMax[0]), Math.max(Math.min(isNaN(center[1]) ? _this.state.center[1] : center[1], minMax[3]), minMax[2])];\n    };\n    _this.onAnimationStart = function () {\n      _this.props.onAnimationStart && _this.props.onAnimationStart();\n    };\n    _this.onAnimationStop = function () {\n      _this.props.onAnimationStop && _this.props.onAnimationStop();\n    };\n    _this.setCenterZoom = function (center, zoom) {\n      var animationEnded = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var limitedCenter = _this.limitCenterAtZoom(center, zoom);\n      if (Math.round(_this.state.zoom) !== Math.round(zoom)) {\n        var tileValues = _this.tileValues(_this.state);\n        var nextValues = _this.tileValues({\n          center: limitedCenter,\n          zoom: zoom,\n          width: _this.state.width,\n          height: _this.state.height\n        });\n        var oldTiles = _this.state.oldTiles;\n        _this.setState({\n          oldTiles: oldTiles.filter(function (o) {\n            return o.roundedZoom !== tileValues.roundedZoom;\n          }).concat(tileValues)\n        }, NOOP);\n        var loadTracker = {};\n        for (var x = nextValues.tileMinX; x <= nextValues.tileMaxX; x++) {\n          for (var y = nextValues.tileMinY; y <= nextValues.tileMaxY; y++) {\n            var key = x + '-' + y + '-' + nextValues.roundedZoom;\n            loadTracker[key] = false;\n          }\n        }\n        _this._loadTracker = loadTracker;\n      }\n      _this.setState({\n        center: limitedCenter,\n        zoom: zoom\n      }, NOOP);\n      var maybeZoom = _this.props.zoom ? _this.props.zoom : _this._lastZoom;\n      var maybeCenter = _this.props.center ? _this.props.center : _this._lastCenter;\n      if (animationEnded || Math.abs(maybeZoom - zoom) > 0.001 || Math.abs(maybeCenter[0] - limitedCenter[0]) > 0.00001 || Math.abs(maybeCenter[1] - limitedCenter[1]) > 0.00001) {\n        _this._lastZoom = zoom;\n        _this._lastCenter = [].concat(limitedCenter);\n        _this.syncToProps(limitedCenter, zoom);\n      }\n    };\n    _this.getBoundsMinMax = function (zoom) {\n      if (_this.props.limitBounds === 'center') {\n        return absoluteMinMax;\n      }\n      var _this$state2 = _this.state,\n        width = _this$state2.width,\n        height = _this$state2.height;\n      if (_this._minMaxCache && _this._minMaxCache[0] === zoom && _this._minMaxCache[1] === width && _this._minMaxCache[2] === height) {\n        return _this._minMaxCache[3];\n      }\n      var pixelsAtZoom = Math.pow(2, zoom) * 256;\n      var minLng = width > pixelsAtZoom ? 0 : tile2lng(width / 512, zoom); // x\n      var minLat = height > pixelsAtZoom ? 0 : tile2lat(Math.pow(2, zoom) - height / 512, zoom); // y\n\n      var maxLng = width > pixelsAtZoom ? 0 : tile2lng(Math.pow(2, zoom) - width / 512, zoom); // x\n      var maxLat = height > pixelsAtZoom ? 0 : tile2lat(height / 512, zoom); // y\n\n      var minMax = [minLat, maxLat, minLng, maxLng];\n      _this._minMaxCache = [zoom, width, height, minMax];\n      return minMax;\n    };\n    _this.imageLoaded = function (key) {\n      if (_this._loadTracker && key in _this._loadTracker) {\n        _this._loadTracker[key] = true;\n        var unloadedCount = Object.keys(_this._loadTracker).filter(function (k) {\n          return !_this._loadTracker[k];\n        }).length;\n        if (unloadedCount === 0) {\n          _this.setState({\n            oldTiles: []\n          }, NOOP);\n        }\n      }\n    };\n    _this.handleTouchStart = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n      if (event.target && parentHasClass(event.target, 'pigeon-drag-block')) {\n        return;\n      }\n      if (event.touches.length === 1) {\n        var touch = event.touches[0];\n        var pixel = getMousePixel(_this._containerRef, touch);\n        if (_this.coordsInside(pixel)) {\n          _this._touchStartPixel = [pixel];\n          if (!_this.props.twoFingerDrag) {\n            _this.stopAnimating();\n            if (_this._lastTap && performanceNow() - _this._lastTap < DOUBLE_CLICK_DELAY) {\n              event.preventDefault();\n              var latLngNow = _this.pixelToLatLng(_this._touchStartPixel[0]);\n              _this.setCenterZoomTarget(null, Math.max(_this.props.minZoom, Math.min(_this.state.zoom + 1, _this.props.maxZoom)), false, latLngNow);\n            } else {\n              _this._lastTap = performanceNow();\n              _this.trackMoveEvents(pixel);\n            }\n          }\n        }\n        // added second finger and first one was in the area\n      } else if (event.touches.length === 2 && _this._touchStartPixel) {\n        event.preventDefault();\n        _this.stopTrackingMoveEvents();\n        if (_this.state.pixelDelta || _this.state.zoomDelta) {\n          _this.sendDeltaChange();\n        }\n        var t1 = getMousePixel(_this._containerRef, event.touches[0]);\n        var t2 = getMousePixel(_this._containerRef, event.touches[1]);\n        _this._touchStartPixel = [t1, t2];\n        _this._touchStartMidPoint = [(t1[0] + t2[0]) / 2, (t1[1] + t2[1]) / 2];\n        _this._touchStartDistance = Math.sqrt(Math.pow(t1[0] - t2[0], 2) + Math.pow(t1[1] - t2[1], 2));\n      }\n    };\n    _this.handleTouchMove = function (event) {\n      if (!_this._containerRef) {\n        _this._touchStartPixel = null;\n        return;\n      }\n      if (event.touches.length === 1 && _this._touchStartPixel) {\n        var touch = event.touches[0];\n        var pixel = getMousePixel(_this._containerRef, touch);\n        if (_this.props.twoFingerDrag) {\n          if (_this.coordsInside(pixel)) {\n            _this.showWarning('fingers');\n          }\n        } else {\n          event.preventDefault();\n          _this.trackMoveEvents(pixel);\n          _this.setState({\n            pixelDelta: [pixel[0] - _this._touchStartPixel[0][0], pixel[1] - _this._touchStartPixel[0][1]]\n          }, NOOP);\n        }\n      } else if (event.touches.length === 2 && _this._touchStartPixel) {\n        var _this$state3 = _this.state,\n          width = _this$state3.width,\n          height = _this$state3.height,\n          zoom = _this$state3.zoom;\n        event.preventDefault();\n        var t1 = getMousePixel(_this._containerRef, event.touches[0]);\n        var t2 = getMousePixel(_this._containerRef, event.touches[1]);\n        var midPoint = [(t1[0] + t2[0]) / 2, (t1[1] + t2[1]) / 2];\n        var midPointDiff = [midPoint[0] - _this._touchStartMidPoint[0], midPoint[1] - _this._touchStartMidPoint[1]];\n        var distance = Math.sqrt(Math.pow(t1[0] - t2[0], 2) + Math.pow(t1[1] - t2[1], 2));\n        var zoomDelta = Math.max(_this.props.minZoom, Math.min(_this.props.maxZoom, zoom + Math.log2(distance / _this._touchStartDistance))) - zoom;\n        var scale = Math.pow(2, zoomDelta);\n        var centerDiffDiff = [(width / 2 - midPoint[0]) * (scale - 1), (height / 2 - midPoint[1]) * (scale - 1)];\n        _this.setState({\n          zoomDelta: zoomDelta,\n          pixelDelta: [centerDiffDiff[0] + midPointDiff[0] * scale, centerDiffDiff[1] + midPointDiff[1] * scale]\n        }, NOOP);\n      }\n    };\n    _this.handleTouchEnd = function (event) {\n      if (!_this._containerRef) {\n        _this._touchStartPixel = null;\n        return;\n      }\n      if (_this._touchStartPixel) {\n        var _this$props = _this.props,\n          zoomSnap = _this$props.zoomSnap,\n          twoFingerDrag = _this$props.twoFingerDrag,\n          minZoom = _this$props.minZoom,\n          maxZoom = _this$props.maxZoom;\n        var zoomDelta = _this.state.zoomDelta;\n        var _this$sendDeltaChange = _this.sendDeltaChange(),\n          center = _this$sendDeltaChange.center,\n          zoom = _this$sendDeltaChange.zoom;\n        if (event.touches.length === 0) {\n          if (twoFingerDrag) {\n            _this.clearWarning();\n          } else {\n            // if the click started and ended at about\n            // the same place we can view it as a click\n            // and not prevent default behavior.\n            var oldTouchPixel = _this._touchStartPixel[0];\n            var newTouchPixel = getMousePixel(_this._containerRef, event.changedTouches[0]);\n            if (Math.abs(oldTouchPixel[0] - newTouchPixel[0]) > CLICK_TOLERANCE || Math.abs(oldTouchPixel[1] - newTouchPixel[1]) > CLICK_TOLERANCE) {\n              // don't throw immediately after releasing the second finger\n              if (!_this._secondTouchEnd || performanceNow() - _this._secondTouchEnd > PINCH_RELEASE_THROW_DELAY) {\n                event.preventDefault();\n                _this.throwAfterMoving(newTouchPixel, center, zoom);\n              }\n            }\n            _this._touchStartPixel = null;\n            _this._secondTouchEnd = null;\n          }\n        } else if (event.touches.length === 1) {\n          event.preventDefault();\n          var touch = getMousePixel(_this._containerRef, event.touches[0]);\n          _this._secondTouchEnd = performanceNow();\n          _this._touchStartPixel = [touch];\n          _this.trackMoveEvents(touch);\n          if (zoomSnap) {\n            // if somehow we have no midpoint for the two finger touch, just take the center of the map\n            var latLng = _this._touchStartMidPoint ? _this.pixelToLatLng(_this._touchStartMidPoint) : _this.state.center;\n            var zoomTarget = void 0;\n\n            // do not zoom up/down if we must drag with 2 fingers and didn't change the zoom level\n            if (twoFingerDrag && Math.round(_this.state.zoom) === Math.round(_this.state.zoom + zoomDelta)) {\n              zoomTarget = Math.round(_this.state.zoom);\n            } else {\n              zoomTarget = zoomDelta > 0 ? Math.ceil(_this.state.zoom) : Math.floor(_this.state.zoom);\n            }\n            var _zoom = Math.max(minZoom, Math.min(zoomTarget, maxZoom));\n            _this.setCenterZoomTarget(latLng, _zoom, false, latLng);\n          }\n        }\n      }\n    };\n    _this.handleMouseDown = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n      var pixel = getMousePixel(_this._containerRef, event);\n      if (event.button === 0 && (!event.target || !parentHasClass(event.target, 'pigeon-drag-block')) && _this.coordsInside(pixel)) {\n        _this.stopAnimating();\n        event.preventDefault();\n        if (_this._lastClick && performanceNow() - _this._lastClick < DOUBLE_CLICK_DELAY) {\n          var latLngNow = _this.pixelToLatLng(_this._mousePosition || pixel);\n          _this.setCenterZoomTarget(null, Math.max(_this.props.minZoom, Math.min(_this.state.zoom + 1, _this.props.maxZoom)), false, latLngNow);\n        } else {\n          _this._lastClick = performanceNow();\n          _this._mouseDown = true;\n          _this._dragStart = pixel;\n          _this.trackMoveEvents(pixel);\n        }\n      }\n    };\n    _this.handleMouseMove = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n      _this._mousePosition = getMousePixel(_this._containerRef, event);\n      if (_this._mouseDown && _this._dragStart) {\n        _this.trackMoveEvents(_this._mousePosition);\n        _this.setState({\n          pixelDelta: [_this._mousePosition[0] - _this._dragStart[0], _this._mousePosition[1] - _this._dragStart[1]]\n        }, NOOP);\n      }\n    };\n    _this.handleMouseUp = function (event) {\n      if (!_this._containerRef) {\n        _this._mouseDown = false;\n        return;\n      }\n      var pixelDelta = _this.state.pixelDelta;\n      if (_this._mouseDown) {\n        _this._mouseDown = false;\n        var pixel = getMousePixel(_this._containerRef, event);\n        if (_this.props.onClick && (!event.target || !parentHasClass(event.target, 'pigeon-click-block')) && (!pixelDelta || Math.abs(pixelDelta[0]) + Math.abs(pixelDelta[1]) <= CLICK_TOLERANCE)) {\n          var latLng = _this.pixelToLatLng(pixel);\n          _this.props.onClick({\n            event: event,\n            latLng: latLng,\n            pixel: pixel\n          });\n          _this.setState({\n            pixelDelta: null\n          }, NOOP);\n        } else {\n          var _this$sendDeltaChange2 = _this.sendDeltaChange(),\n            center = _this$sendDeltaChange2.center,\n            zoom = _this$sendDeltaChange2.zoom;\n          _this.throwAfterMoving(pixel, center, zoom);\n        }\n      }\n    };\n    _this.stopTrackingMoveEvents = function () {\n      _this._moveEvents = [];\n    };\n    _this.trackMoveEvents = function (coords) {\n      var timestamp = performanceNow();\n      if (_this._moveEvents.length === 0 || timestamp - _this._moveEvents[_this._moveEvents.length - 1].timestamp > 40) {\n        _this._moveEvents.push({\n          timestamp: timestamp,\n          coords: coords\n        });\n        if (_this._moveEvents.length > 2) {\n          _this._moveEvents.shift();\n        }\n      }\n    };\n    _this.throwAfterMoving = function (coords, center, zoom) {\n      var _this$state4 = _this.state,\n        width = _this$state4.width,\n        height = _this$state4.height;\n      var animate = _this.props.animate;\n      var timestamp = performanceNow();\n      var lastEvent = _this._moveEvents.shift();\n      if (lastEvent && animate) {\n        var deltaMs = Math.max(timestamp - lastEvent.timestamp, 1);\n        var delta = [(coords[0] - lastEvent.coords[0]) / deltaMs * 120, (coords[1] - lastEvent.coords[1]) / deltaMs * 120];\n        var distance = Math.sqrt(delta[0] * delta[0] + delta[1] * delta[1]);\n        if (distance > MIN_DRAG_FOR_THROW) {\n          var diagonal = Math.sqrt(width * width + height * height);\n          var throwTime = DIAGONAL_THROW_TIME * distance / diagonal;\n          var lng = tile2lng(lng2tile(center[1], zoom) - delta[0] / 256.0, zoom);\n          var lat = tile2lat(lat2tile(center[0], zoom) - delta[1] / 256.0, zoom);\n          _this.setCenterZoomTarget([lat, lng], zoom, false, null, throwTime);\n        }\n      }\n      _this.stopTrackingMoveEvents();\n    };\n    _this.sendDeltaChange = function () {\n      var _this$state5 = _this.state,\n        center = _this$state5.center,\n        zoom = _this$state5.zoom,\n        pixelDelta = _this$state5.pixelDelta,\n        zoomDelta = _this$state5.zoomDelta;\n      var lat = center[0];\n      var lng = center[1];\n      if (pixelDelta || zoomDelta !== 0) {\n        lng = tile2lng(lng2tile(center[1], zoom + zoomDelta) - (pixelDelta ? pixelDelta[0] / 256.0 : 0), zoom + zoomDelta);\n        lat = tile2lat(lat2tile(center[0], zoom + zoomDelta) - (pixelDelta ? pixelDelta[1] / 256.0 : 0), zoom + zoomDelta);\n        _this.setCenterZoom([lat, lng], zoom + zoomDelta);\n      }\n      _this.setState({\n        pixelDelta: null,\n        zoomDelta: 0\n      }, NOOP);\n      return {\n        center: _this.limitCenterAtZoom([lat, lng], zoom + zoomDelta),\n        zoom: zoom + zoomDelta\n      };\n    };\n    _this.getBounds = function () {\n      var center = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.state.center;\n      var zoom = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this.zoomPlusDelta();\n      var _this$state6 = _this.state,\n        width = _this$state6.width,\n        height = _this$state6.height;\n      return {\n        ne: _this.pixelToLatLng([width - 1, 0], center, zoom),\n        sw: _this.pixelToLatLng([0, height - 1], center, zoom)\n      };\n    };\n    _this.syncToProps = function () {\n      var center = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.state.center;\n      var zoom = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this.state.zoom;\n      var onBoundsChanged = _this.props.onBoundsChanged;\n      if (onBoundsChanged) {\n        var bounds = _this.getBounds(center, zoom);\n        onBoundsChanged({\n          center: center,\n          zoom: zoom,\n          bounds: bounds,\n          initial: !_this._boundsSynced\n        });\n        _this._boundsSynced = true;\n      }\n    };\n    _this.handleWheel = function (event) {\n      var _this$props2 = _this.props,\n        mouseEvents = _this$props2.mouseEvents,\n        metaWheelZoom = _this$props2.metaWheelZoom,\n        zoomSnap = _this$props2.zoomSnap,\n        animate = _this$props2.animate;\n      if (!mouseEvents) {\n        return;\n      }\n      if (!metaWheelZoom || event.metaKey) {\n        event.preventDefault();\n        var addToZoom = -event.deltaY / SCROLL_PIXELS_FOR_ZOOM_LEVEL;\n        if (!zoomSnap && _this._zoomTarget) {\n          var stillToAdd = _this._zoomTarget - _this.state.zoom;\n          _this.zoomAroundMouse(addToZoom + stillToAdd, event);\n        } else {\n          if (animate) {\n            _this.zoomAroundMouse(addToZoom, event);\n          } else {\n            if (!_this._lastWheel || performanceNow() - _this._lastWheel > ANIMATION_TIME) {\n              _this._lastWheel = performanceNow();\n              _this.zoomAroundMouse(addToZoom, event);\n            }\n          }\n        }\n      } else {\n        _this.showWarning('wheel');\n      }\n    };\n    _this.showWarning = function (warningType) {\n      if (!_this.state.showWarning || _this.state.warningType !== warningType) {\n        _this.setState({\n          showWarning: true,\n          warningType: warningType\n        });\n      }\n      if (_this._warningClearTimeout) {\n        window.clearTimeout(_this._warningClearTimeout);\n      }\n      _this._warningClearTimeout = window.setTimeout(_this.clearWarning, WARNING_DISPLAY_TIMEOUT);\n    };\n    _this.clearWarning = function () {\n      if (_this.state.showWarning) {\n        _this.setState({\n          showWarning: false\n        });\n      }\n    };\n    _this.zoomAroundMouse = function (zoomDiff, event) {\n      if (!_this._containerRef) {\n        return;\n      }\n      var zoom = _this.state.zoom;\n      var _this$props3 = _this.props,\n        minZoom = _this$props3.minZoom,\n        maxZoom = _this$props3.maxZoom,\n        zoomSnap = _this$props3.zoomSnap;\n      _this._mousePosition = getMousePixel(_this._containerRef, event);\n      if (!_this._mousePosition || zoom === minZoom && zoomDiff < 0 || zoom === maxZoom && zoomDiff > 0) {\n        return;\n      }\n      var latLngNow = _this.pixelToLatLng(_this._mousePosition);\n      var zoomTarget = zoom + zoomDiff;\n      if (zoomSnap) {\n        zoomTarget = zoomDiff < 0 ? Math.floor(zoomTarget) : Math.ceil(zoomTarget);\n      }\n      zoomTarget = Math.max(minZoom, Math.min(zoomTarget, maxZoom));\n      _this.setCenterZoomTarget(null, zoomTarget, false, latLngNow);\n    };\n    _this.zoomPlusDelta = function () {\n      return _this.state.zoom + _this.state.zoomDelta;\n    };\n    _this.pixelToLatLng = function (pixel) {\n      var center = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this.state.center;\n      var zoom = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this.zoomPlusDelta();\n      var _this$state7 = _this.state,\n        width = _this$state7.width,\n        height = _this$state7.height,\n        pixelDelta = _this$state7.pixelDelta;\n      var pointDiff = [(pixel[0] - width / 2 - (pixelDelta ? pixelDelta[0] : 0)) / 256.0, (pixel[1] - height / 2 - (pixelDelta ? pixelDelta[1] : 0)) / 256.0];\n      var tileX = lng2tile(center[1], zoom) + pointDiff[0];\n      var tileY = lat2tile(center[0], zoom) + pointDiff[1];\n      return [Math.max(absoluteMinMax[0], Math.min(absoluteMinMax[1], tile2lat(tileY, zoom))), Math.max(absoluteMinMax[2], Math.min(absoluteMinMax[3], tile2lng(tileX, zoom)))];\n    };\n    _this.latLngToPixel = function (latLng) {\n      var center = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this.state.center;\n      var zoom = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this.zoomPlusDelta();\n      var _this$state8 = _this.state,\n        width = _this$state8.width,\n        height = _this$state8.height,\n        pixelDelta = _this$state8.pixelDelta;\n      var tileCenterX = lng2tile(center[1], zoom);\n      var tileCenterY = lat2tile(center[0], zoom);\n      var tileX = lng2tile(latLng[1], zoom);\n      var tileY = lat2tile(latLng[0], zoom);\n      return [(tileX - tileCenterX) * 256.0 + width / 2 + (pixelDelta ? pixelDelta[0] : 0), (tileY - tileCenterY) * 256.0 + height / 2 + (pixelDelta ? pixelDelta[1] : 0)];\n    };\n    _this.calculateZoomCenter = function (center, coords, oldZoom, newZoom) {\n      var _this$state9 = _this.state,\n        width = _this$state9.width,\n        height = _this$state9.height;\n      var pixelBefore = _this.latLngToPixel(coords, center, oldZoom);\n      var pixelAfter = _this.latLngToPixel(coords, center, newZoom);\n      var newCenter = _this.pixelToLatLng([width / 2 + pixelAfter[0] - pixelBefore[0], height / 2 + pixelAfter[1] - pixelBefore[1]], center, newZoom);\n      return _this.limitCenterAtZoom(newCenter, newZoom);\n    };\n    _this.setRef = function (dom) {\n      _this._containerRef = dom;\n    };\n    _this.syncToProps = debounce(_this.syncToProps, DEBOUNCE_DELAY);\n    _this._mousePosition = null;\n    _this._dragStart = null;\n    _this._mouseDown = false;\n    _this._moveEvents = [];\n    _this._lastClick = null;\n    _this._lastTap = null;\n    _this._touchStartPixel = null;\n    _this._isAnimating = false;\n    _this._animationStart = null;\n    _this._animationEnd = null;\n    _this._centerTarget = null;\n    _this._zoomTarget = null;\n\n    // When users are using uncontrolled components we have to keep this\n    // so we can know if we should call onBoundsChanged\n    _this._lastZoom = props.defaultZoom ? props.defaultZoom : props.zoom;\n    _this._lastCenter = props.defaultCenter ? props.defaultCenter : props.center;\n    _this._boundsSynced = false;\n    _this._minMaxCache = null;\n    _this.state = {\n      zoom: _this._lastZoom,\n      center: _this._lastCenter,\n      width: props.width || props.defaultWidth,\n      height: props.height || props.defaultHeight,\n      zoomDelta: 0,\n      pixelDelta: null,\n      oldTiles: [],\n      showWarning: false,\n      warningType: null\n    };\n    return _this;\n  }\n  Map.prototype.componentDidMount = function componentDidMount() {\n    this.props.mouseEvents && this.bindMouseEvents();\n    this.props.touchEvents && this.bindTouchEvents();\n    if (!this.props.width || !this.props.height) {\n      // A height:100% container div often results in height=0 being returned on mount.\n      // So ask again once everything is painted.\n      if (!this.updateWidthHeight()) {\n        requestAnimationFrame(this.updateWidthHeight);\n      }\n      this.bindResizeEvent();\n      this.bindWheelEvent();\n    }\n    this.syncToProps();\n  };\n  Map.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.props.mouseEvents && this.unbindMouseEvents();\n    this.props.touchEvents && this.unbindTouchEvents();\n    if (!this.props.width || !this.props.height) {\n      this.unbindResizeEvent();\n      this.unbindWheelEvent();\n    }\n  };\n  Map.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (this.props.mouseEvents !== prevProps.mouseEvents) {\n      this.props.mouseEvents ? this.bindMouseEvents() : this.unbindMouseEvents();\n    }\n    if (this.props.touchEvents !== prevProps.touchEvents) {\n      this.props.touchEvents ? this.bindTouchEvents() : this.unbindTouchEvents();\n    }\n    if (this.props.width && this.props.width !== prevProps.width) {\n      this.setState({\n        width: this.props.width\n      });\n    }\n    if (this.props.height && this.props.height !== prevProps.height) {\n      this.setState({\n        height: this.props.height\n      });\n    }\n    if (!this.props.center && !this.props.zoom) {\n      // if the user isn't controlling neither zoom nor center we don't have to update.\n      return;\n    }\n    if ((!this.props.center || this.props.center[0] === prevProps.center[0] && this.props.center[1] === prevProps.center[1]) && this.props.zoom === prevProps.zoom) {\n      // if the user is controlling either zoom or center but nothing changed\n      // we don't have to update aswell\n      return;\n    }\n    var currentCenter = this._isAnimating ? this._centerTarget : this.state.center;\n    var currentZoom = this._isAnimating ? this._zoomTarget : this.state.zoom;\n    var nextCenter = this.props.center || currentCenter; // prevent the rare null errors\n    var nextZoom = this.props.zoom || currentZoom;\n    if (Math.abs(nextZoom - currentZoom) > 0.001 || Math.abs(nextCenter[0] - currentCenter[0]) > 0.0001 || Math.abs(nextCenter[1] - currentCenter[1]) > 0.0001) {\n      this.setCenterZoomTarget(nextCenter, nextZoom, true);\n    }\n  };\n\n  // main logic when changing coordinates\n\n  Map.prototype.coordsInside = function coordsInside(pixel) {\n    var _state = this.state,\n      width = _state.width,\n      height = _state.height;\n    if (pixel[0] < 0 || pixel[1] < 0 || pixel[0] >= width || pixel[1] >= height) {\n      return false;\n    }\n    var parent = this._containerRef;\n    var pos = parentPosition(parent);\n    var element = document.elementFromPoint(pixel[0] + pos.x, pixel[1] + pos.y);\n    return parent === element || parent.contains(element);\n  };\n\n  // https://www.bennadel.com/blog/1856-using-jquery-s-animate-step-callback-function-to-create-custom-animations.htm\n\n  // tools\n\n  // ref\n\n  // data to display the tiles\n\n  Map.prototype.tileValues = function tileValues(state) {\n    var center = state.center,\n      zoom = state.zoom,\n      pixelDelta = state.pixelDelta,\n      zoomDelta = state.zoomDelta,\n      width = state.width,\n      height = state.height;\n    var roundedZoom = Math.round(zoom + (zoomDelta || 0));\n    var zoomDiff = zoom + (zoomDelta || 0) - roundedZoom;\n    var scale = Math.pow(2, zoomDiff);\n    var scaleWidth = width / scale;\n    var scaleHeight = height / scale;\n    var tileCenterX = lng2tile(center[1], roundedZoom) - (pixelDelta ? pixelDelta[0] / 256.0 / scale : 0);\n    var tileCenterY = lat2tile(center[0], roundedZoom) - (pixelDelta ? pixelDelta[1] / 256.0 / scale : 0);\n    var halfWidth = scaleWidth / 2 / 256.0;\n    var halfHeight = scaleHeight / 2 / 256.0;\n    var tileMinX = Math.floor(tileCenterX - halfWidth);\n    var tileMaxX = Math.floor(tileCenterX + halfWidth);\n    var tileMinY = Math.floor(tileCenterY - halfHeight);\n    var tileMaxY = Math.floor(tileCenterY + halfHeight);\n    return {\n      tileMinX: tileMinX,\n      tileMaxX: tileMaxX,\n      tileMinY: tileMinY,\n      tileMaxY: tileMaxY,\n      tileCenterX: tileCenterX,\n      tileCenterY: tileCenterY,\n      roundedZoom: roundedZoom,\n      zoomDelta: zoomDelta || 0,\n      scaleWidth: scaleWidth,\n      scaleHeight: scaleHeight,\n      scale: scale\n    };\n  };\n\n  // display the tiles\n\n  Map.prototype.renderTiles = function renderTiles() {\n    var _this2 = this;\n    var oldTiles = this.state.oldTiles;\n    var dprs = this.props.dprs;\n    var mapUrl = this.props.provider || wikimedia;\n    var _tileValues = this.tileValues(this.state),\n      tileMinX = _tileValues.tileMinX,\n      tileMaxX = _tileValues.tileMaxX,\n      tileMinY = _tileValues.tileMinY,\n      tileMaxY = _tileValues.tileMaxY,\n      tileCenterX = _tileValues.tileCenterX,\n      tileCenterY = _tileValues.tileCenterY,\n      roundedZoom = _tileValues.roundedZoom,\n      scaleWidth = _tileValues.scaleWidth,\n      scaleHeight = _tileValues.scaleHeight,\n      scale = _tileValues.scale;\n    var tiles = [];\n    for (var i = 0; i < oldTiles.length; i++) {\n      var old = oldTiles[i];\n      var zoomDiff = old.roundedZoom - roundedZoom;\n      if (Math.abs(zoomDiff) > 4 || zoomDiff === 0) {\n        continue;\n      }\n      var pow = 1 / Math.pow(2, zoomDiff);\n      var xDiff = -(tileMinX - old.tileMinX * pow) * 256;\n      var yDiff = -(tileMinY - old.tileMinY * pow) * 256;\n      var _xMin = Math.max(old.tileMinX, 0);\n      var _yMin = Math.max(old.tileMinY, 0);\n      var _xMax = Math.min(old.tileMaxX, Math.pow(2, old.roundedZoom) - 1);\n      var _yMax = Math.min(old.tileMaxY, Math.pow(2, old.roundedZoom) - 1);\n      for (var x = _xMin; x <= _xMax; x++) {\n        for (var y = _yMin; y <= _yMax; y++) {\n          tiles.push({\n            key: x + '-' + y + '-' + old.roundedZoom,\n            url: mapUrl(x, y, old.roundedZoom),\n            srcSet: srcSet(dprs, mapUrl, x, y, old.roundedZoom),\n            left: xDiff + (x - old.tileMinX) * 256 * pow,\n            top: yDiff + (y - old.tileMinY) * 256 * pow,\n            width: 256 * pow,\n            height: 256 * pow,\n            active: false\n          });\n        }\n      }\n    }\n    var xMin = Math.max(tileMinX, 0);\n    var yMin = Math.max(tileMinY, 0);\n    var xMax = Math.min(tileMaxX, Math.pow(2, roundedZoom) - 1);\n    var yMax = Math.min(tileMaxY, Math.pow(2, roundedZoom) - 1);\n    for (var _x13 = xMin; _x13 <= xMax; _x13++) {\n      for (var _y = yMin; _y <= yMax; _y++) {\n        tiles.push({\n          key: _x13 + '-' + _y + '-' + roundedZoom,\n          url: mapUrl(_x13, _y, roundedZoom),\n          srcSet: srcSet(dprs, mapUrl, _x13, _y, roundedZoom),\n          left: (_x13 - tileMinX) * 256,\n          top: (_y - tileMinY) * 256,\n          width: 256,\n          height: 256,\n          active: true\n        });\n      }\n    }\n    var boxStyle = {\n      width: scaleWidth,\n      height: scaleHeight,\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      overflow: 'hidden',\n      willChange: 'transform',\n      transform: 'scale(' + scale + ', ' + scale + ')',\n      transformOrigin: 'top left'\n    };\n    var boxClassname = this.props.boxClassname || '';\n    var left = -((tileCenterX - tileMinX) * 256 - scaleWidth / 2);\n    var top = -((tileCenterY - tileMinY) * 256 - scaleHeight / 2);\n    var tilesStyle = {\n      position: 'absolute',\n      width: (tileMaxX - tileMinX + 1) * 256,\n      height: (tileMaxY - tileMinY + 1) * 256,\n      willChange: 'transform',\n      transform: 'translate(' + left + 'px, ' + top + 'px)'\n    };\n    return React__default.createElement('div', {\n      style: boxStyle,\n      className: boxClassname\n    }, React__default.createElement('div', {\n      style: tilesStyle\n    }, tiles.map(function (tile) {\n      return React__default.createElement('img', {\n        key: tile.key,\n        src: tile.url,\n        srcSet: tile.srcSet,\n        width: tile.width,\n        height: tile.height,\n        onLoad: function onLoad() {\n          return _this2.imageLoaded(tile.key);\n        },\n        style: {\n          position: 'absolute',\n          left: tile.left,\n          top: tile.top,\n          willChange: 'transform',\n          transform: tile.transform,\n          transformOrigin: 'top left',\n          opacity: 1\n        }\n      });\n    })));\n  };\n  Map.prototype.renderOverlays = function renderOverlays() {\n    var _this3 = this;\n    var _state2 = this.state,\n      width = _state2.width,\n      height = _state2.height,\n      center = _state2.center;\n    var mapState = {\n      bounds: this.getBounds(),\n      zoom: this.zoomPlusDelta(),\n      center: center,\n      width: width,\n      height: height\n    };\n    var childrenWithProps = React__default.Children.map(this.props.children, function (child) {\n      if (!child) {\n        return null;\n      }\n      if (typeof child.type === 'string') {\n        return child;\n      }\n      var _child$props = child.props,\n        anchor = _child$props.anchor,\n        position = _child$props.position,\n        offset = _child$props.offset;\n      var c = _this3.latLngToPixel(anchor || position || center);\n      return React__default.cloneElement(child, {\n        left: c[0] - (offset ? offset[0] : 0),\n        top: c[1] - (offset ? offset[1] : 0),\n        latLngToPixel: _this3.latLngToPixel,\n        pixelToLatLng: _this3.pixelToLatLng,\n        mapState: mapState\n      });\n    });\n    var childrenStyle = {\n      position: 'absolute',\n      width: width,\n      height: height,\n      top: 0,\n      left: 0\n    };\n    return React__default.createElement('div', {\n      style: childrenStyle\n    }, childrenWithProps);\n  };\n  Map.prototype.renderAttribution = function renderAttribution() {\n    var _props = this.props,\n      attribution = _props.attribution,\n      attributionPrefix = _props.attributionPrefix;\n    if (attribution === false) {\n      return null;\n    }\n    var style = {\n      position: 'absolute',\n      bottom: 0,\n      right: 0,\n      fontSize: '11px',\n      padding: '2px 5px',\n      background: 'rgba(255, 255, 255, 0.7)',\n      fontFamily: \"'Helvetica Neue', Helvetica, Arial, sans-serif\",\n      color: '#333'\n    };\n    var linkStyle = {\n      color: '#0078A8',\n      textDecoration: 'none'\n    };\n    return React__default.createElement('div', {\n      key: 'attr',\n      className: 'pigeon-attribution',\n      style: style\n    }, attributionPrefix === false ? null : React__default.createElement('span', null, attributionPrefix || React__default.createElement('a', {\n      href: 'https://pigeon-maps.js.org/',\n      style: linkStyle\n    }, 'Pigeon'), ' | '), attribution || React__default.createElement('span', null, ' © ', React__default.createElement('a', {\n      href: 'https://www.openstreetmap.org/copyright',\n      style: linkStyle\n    }, 'OpenStreetMap'), ' contributors'));\n  };\n  Map.prototype.renderWarning = function renderWarning() {\n    var _props2 = this.props,\n      metaWheelZoom = _props2.metaWheelZoom,\n      metaWheelZoomWarning = _props2.metaWheelZoomWarning,\n      twoFingerDrag = _props2.twoFingerDrag,\n      twoFingerDragWarning = _props2.twoFingerDragWarning,\n      warningZIndex = _props2.warningZIndex;\n    var _state3 = this.state,\n      showWarning = _state3.showWarning,\n      warningType = _state3.warningType,\n      width = _state3.width,\n      height = _state3.height;\n    if (metaWheelZoom && metaWheelZoomWarning || twoFingerDrag && twoFingerDragWarning) {\n      var style = {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: width,\n        height: height,\n        overflow: 'hidden',\n        pointerEvents: 'none',\n        opacity: showWarning ? 100 : 0,\n        transition: 'opacity 300ms',\n        background: 'rgba(0,0,0,0.5)',\n        color: '#fff',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        fontSize: 22,\n        fontFamily: '\"Arial\", sans-serif',\n        textAlign: 'center',\n        zIndex: warningZIndex\n      };\n      var meta = typeof window !== 'undefined' && window.navigator && window.navigator.platform.toUpperCase().indexOf('MAC') >= 0 ? '⌘' : '⊞';\n      var warningText = warningType === 'fingers' ? twoFingerDragWarning : metaWheelZoomWarning;\n      return React__default.createElement('div', {\n        style: style\n      }, warningText.replace('META', meta));\n    } else {\n      return null;\n    }\n  };\n  Map.prototype.render = function render() {\n    var _props3 = this.props,\n      touchEvents = _props3.touchEvents,\n      twoFingerDrag = _props3.twoFingerDrag;\n    var _state4 = this.state,\n      width = _state4.width,\n      height = _state4.height;\n    var containerStyle = {\n      width: this.props.width ? width : '100%',\n      height: this.props.height ? height : '100%',\n      position: 'relative',\n      display: 'inline-block',\n      overflow: 'hidden',\n      background: '#dddddd',\n      touchAction: touchEvents ? twoFingerDrag ? 'pan-x pan-y' : 'none' : 'auto'\n    };\n    var hasSize = !!(width && height);\n    return React__default.createElement('div', {\n      style: containerStyle,\n      ref: this.setRef\n    }, hasSize && this.renderTiles(), hasSize && this.renderOverlays(), hasSize && this.renderAttribution(), hasSize && this.renderWarning());\n  };\n  return Map;\n}(React.Component);\nMap.defaultProps = {\n  animate: true,\n  metaWheelZoom: false,\n  metaWheelZoomWarning: 'Use META+wheel to zoom!',\n  twoFingerDrag: false,\n  twoFingerDragWarning: 'Use two fingers to move the map',\n  zoomSnap: true,\n  mouseEvents: true,\n  touchEvents: true,\n  warningZIndex: 100,\n  animateMaxScreens: 5,\n  minZoom: 1,\n  maxZoom: 18,\n  limitBounds: 'center',\n  dprs: []\n};\nprocess.env.NODE_ENV !== \"production\" ? Map.propTypes = {\n  center: PropTypes.array,\n  defaultCenter: PropTypes.array,\n  zoom: PropTypes.number,\n  defaultZoom: PropTypes.number,\n  width: PropTypes.number,\n  defaultWidth: PropTypes.number,\n  height: PropTypes.number,\n  defaultHeight: PropTypes.number,\n  provider: PropTypes.func,\n  dprs: PropTypes.array,\n  children: PropTypes.node,\n  animate: PropTypes.bool,\n  animateMaxScreens: PropTypes.number,\n  minZoom: PropTypes.number,\n  maxZoom: PropTypes.number,\n  metaWheelZoom: PropTypes.bool,\n  metaWheelZoomWarning: PropTypes.string,\n  twoFingerDrag: PropTypes.bool,\n  twoFingerDragWarning: PropTypes.string,\n  warningZIndex: PropTypes.number,\n  attribution: PropTypes.any,\n  attributionPrefix: PropTypes.any,\n  zoomSnap: PropTypes.bool,\n  mouseEvents: PropTypes.bool,\n  touchEvents: PropTypes.bool,\n  onClick: PropTypes.func,\n  onBoundsChanged: PropTypes.func,\n  onAnimationStart: PropTypes.func,\n  onAnimationStop: PropTypes.func,\n  // will be set to \"edge\" from v0.12 onward, defaulted to \"center\" before\n  limitBounds: PropTypes.oneOf(['center', 'edge'])\n} : void 0;\nmodule.exports = Map;","map":{"version":3,"names":["_interopDefault","ex","React","require","React__default","PropTypes","parentPosition","element","rect","getBoundingClientRect","x","left","y","top","parentHasClass","className","classList","contains","offsetParent","debounce","func","wait","timeout","_len","arguments","length","args","Array","_key","context","clearTimeout","setTimeout","apply","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","ANIMATION_TIME","DIAGONAL_THROW_TIME","SCROLL_PIXELS_FOR_ZOOM_LEVEL","MIN_DRAG_FOR_THROW","CLICK_TOLERANCE","DOUBLE_CLICK_DELAY","DEBOUNCE_DELAY","PINCH_RELEASE_THROW_DELAY","WARNING_DISPLAY_TIMEOUT","NOOP","wikimedia","z","dpr","retina","window","devicePixelRatio","lng2tile","lon","zoom","Math","pow","lat2tile","lat","log","tan","PI","cos","tile2lng","tile2lat","n","atan","exp","getMousePixel","dom","event","parent","clientX","clientY","easeOutQuad","t","absoluteMinMax","hasWindow","performanceNow","performance","now","timeStart","Date","getTime","requestAnimationFrame","callback","cancelAnimationFrame","srcSet","dprs","url","map","join","Map","_Component","props","_this","updateWidthHeight","_containerRef","width","height","setState","wa","e","o","addEventListener","wr","removeEventListener","bindMouseEvents","handleMouseDown","handleMouseUp","handleMouseMove","bindTouchEvents","handleTouchStart","passive","handleTouchMove","handleTouchEnd","unbindMouseEvents","unbindTouchEvents","bindResizeEvent","unbindResizeEvent","bindWheelEvent","handleWheel","unbindWheelEvent","setCenterZoomTarget","center","fromProps","undefined","zoomAround","animationDuration","animate","distanceInScreens","state","animateMaxScreens","_isAnimating","_animFrame","_this$animationStep","animationStep","centerStep","zoomStep","_centerStart","_zoomStart","limitCenterAtZoom","_lastCenter","_lastZoom","onAnimationStart","_animationStart","_animationEnd","_zoomAround","_centerTarget","calculateZoomCenter","_zoomTarget","stopAnimating","_center","setCenterZoom","centerTarget","zoomTarget","_this$state","l1","latLngToPixel","l2","z1","z2","w","abs","h","sqrt","timestamp","progress","max","percentage","zoomDiff","_centerStep","onAnimationStop","_this$animationStep2","minMax","getBoundsMinMax","min","isNaN","animationEnded","limitedCenter","round","tileValues","nextValues","oldTiles","filter","roundedZoom","concat","loadTracker","tileMinX","tileMaxX","tileMinY","tileMaxY","key","_loadTracker","maybeZoom","maybeCenter","syncToProps","limitBounds","_this$state2","_minMaxCache","pixelsAtZoom","minLng","minLat","maxLng","maxLat","imageLoaded","unloadedCount","keys","k","target","touches","touch","pixel","coordsInside","_touchStartPixel","twoFingerDrag","_lastTap","preventDefault","latLngNow","pixelToLatLng","minZoom","maxZoom","trackMoveEvents","stopTrackingMoveEvents","pixelDelta","zoomDelta","sendDeltaChange","t1","t2","_touchStartMidPoint","_touchStartDistance","showWarning","_this$state3","midPoint","midPointDiff","distance","log2","scale","centerDiffDiff","_this$props","zoomSnap","_this$sendDeltaChange","clearWarning","oldTouchPixel","newTouchPixel","changedTouches","_secondTouchEnd","throwAfterMoving","latLng","ceil","floor","_zoom","button","_lastClick","_mousePosition","_mouseDown","_dragStart","onClick","_this$sendDeltaChange2","_moveEvents","coords","push","shift","_this$state4","lastEvent","deltaMs","delta","diagonal","throwTime","lng","_this$state5","getBounds","zoomPlusDelta","_this$state6","ne","sw","onBoundsChanged","bounds","initial","_boundsSynced","_this$props2","mouseEvents","metaWheelZoom","metaKey","addToZoom","deltaY","stillToAdd","zoomAroundMouse","_lastWheel","warningType","_warningClearTimeout","_this$props3","_this$state7","pointDiff","tileX","tileY","_this$state8","tileCenterX","tileCenterY","oldZoom","newZoom","_this$state9","pixelBefore","pixelAfter","newCenter","setRef","defaultZoom","defaultCenter","defaultWidth","defaultHeight","componentDidMount","touchEvents","componentWillUnmount","componentDidUpdate","prevProps","currentCenter","currentZoom","nextCenter","nextZoom","_state","pos","document","elementFromPoint","scaleWidth","scaleHeight","halfWidth","halfHeight","renderTiles","_this2","mapUrl","provider","_tileValues","tiles","i","old","xDiff","yDiff","_xMin","_yMin","_xMax","_yMax","active","xMin","yMin","xMax","yMax","_x13","_y","boxStyle","position","overflow","willChange","transform","transformOrigin","boxClassname","tilesStyle","createElement","style","tile","src","onLoad","opacity","renderOverlays","_this3","_state2","mapState","childrenWithProps","Children","children","child","type","_child$props","anchor","offset","c","cloneElement","childrenStyle","renderAttribution","_props","attribution","attributionPrefix","bottom","right","fontSize","padding","background","fontFamily","color","linkStyle","textDecoration","href","renderWarning","_props2","metaWheelZoomWarning","twoFingerDragWarning","warningZIndex","_state3","pointerEvents","transition","display","justifyContent","alignItems","textAlign","zIndex","meta","navigator","platform","toUpperCase","indexOf","warningText","replace","render","_props3","_state4","containerStyle","touchAction","hasSize","ref","Component","defaultProps","process","env","NODE_ENV","propTypes","array","number","node","bool","string","any","oneOf","module","exports"],"sources":["/home/tainafms/Documentos/Trybe/repo-git-trybe/trybe-exercicios/frontend/secao-07-gerenciamento-de-estado-com-redux/day-04/pratic-01/node_modules/pigeon-maps/lib/index.js"],"sourcesContent":["'use strict';\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar React = require('react');\nvar React__default = _interopDefault(React);\nvar PropTypes = _interopDefault(require('prop-types'));\n\nfunction parentPosition(element) {\n  var rect = element.getBoundingClientRect();\n  return { x: rect.left, y: rect.top };\n}\n\nfunction parentHasClass(element, className) {\n  while (element) {\n    if (element.classList && element.classList.contains(className)) {\n      return true;\n    }\n    element = element.offsetParent;\n  }\n\n  return false;\n}\n\nfunction debounce(func, wait) {\n  var timeout = void 0;\n  return function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var context = this;\n    clearTimeout(timeout);\n    timeout = setTimeout(function () {\n      return func.apply(context, args);\n    }, wait);\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ANIMATION_TIME = 300;\nvar DIAGONAL_THROW_TIME = 1500;\nvar SCROLL_PIXELS_FOR_ZOOM_LEVEL = 150;\nvar MIN_DRAG_FOR_THROW = 40;\nvar CLICK_TOLERANCE = 2;\nvar DOUBLE_CLICK_DELAY = 300;\nvar DEBOUNCE_DELAY = 60;\nvar PINCH_RELEASE_THROW_DELAY = 300;\nvar WARNING_DISPLAY_TIMEOUT = 300;\n\nvar NOOP = function NOOP() {};\n\nfunction wikimedia(x, y, z, dpr) {\n  var retina = typeof dpr !== 'undefined' ? dpr >= 2 : typeof window !== 'undefined' && window.devicePixelRatio >= 2;\n  return 'https://maps.wikimedia.org/osm-intl/' + z + '/' + x + '/' + y + (retina ? '@2x' : '') + '.png';\n}\n\n// https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames\nvar lng2tile = function lng2tile(lon, zoom) {\n  return (lon + 180) / 360 * Math.pow(2, zoom);\n};\nvar lat2tile = function lat2tile(lat, zoom) {\n  return (1 - Math.log(Math.tan(lat * Math.PI / 180) + 1 / Math.cos(lat * Math.PI / 180)) / Math.PI) / 2 * Math.pow(2, zoom);\n};\n\nfunction tile2lng(x, z) {\n  return x / Math.pow(2, z) * 360 - 180;\n}\n\nfunction tile2lat(y, z) {\n  var n = Math.PI - 2 * Math.PI * y / Math.pow(2, z);\n  return 180 / Math.PI * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n)));\n}\n\nfunction getMousePixel(dom, event) {\n  var parent = parentPosition(dom);\n  return [event.clientX - parent.x, event.clientY - parent.y];\n}\n\nfunction easeOutQuad(t) {\n  return t * (2 - t);\n}\n\n// minLat, maxLat, minLng, maxLng\nvar absoluteMinMax = [tile2lat(Math.pow(2, 10), 10), tile2lat(0, 10), tile2lng(0, 10), tile2lng(Math.pow(2, 10), 10)];\n\nvar hasWindow = typeof window !== 'undefined';\n\nvar performanceNow = hasWindow && window.performance && window.performance.now ? function () {\n  return window.performance.now();\n} : function () {\n  var timeStart = new Date().getTime();\n  return function () {\n    return new Date().getTime() - timeStart;\n  };\n}();\n\nvar requestAnimationFrame = hasWindow ? window.requestAnimationFrame || window.setTimeout : function (callback) {\n  return callback();\n};\nvar cancelAnimationFrame = hasWindow ? window.cancelAnimationFrame || window.clearTimeout : function () {};\n\nfunction srcSet(dprs, url, x, y, z) {\n  if (!dprs || dprs.length === 0) {\n    return '';\n  }\n  return dprs.map(function (dpr) {\n    return url(x, y, z, dpr) + (dpr === 1 ? '' : ' ' + dpr + 'x');\n  }).join(', ');\n}\n\nvar Map = function (_Component) {\n  _inherits(Map, _Component);\n\n  function Map(props) {\n    _classCallCheck(this, Map);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _this.updateWidthHeight = function () {\n      if (_this._containerRef) {\n        var rect = _this._containerRef.getBoundingClientRect();\n\n        if (rect && rect.width > 0 && rect.height > 0) {\n          _this.setState({\n            width: rect.width,\n            height: rect.height\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n\n    _this.wa = function (e, t, o) {\n      return window.addEventListener(e, t, o);\n    };\n\n    _this.wr = function (e, t) {\n      return window.removeEventListener(e, t);\n    };\n\n    _this.bindMouseEvents = function () {\n      _this.wa('mousedown', _this.handleMouseDown);\n      _this.wa('mouseup', _this.handleMouseUp);\n      _this.wa('mousemove', _this.handleMouseMove);\n    };\n\n    _this.bindTouchEvents = function () {\n      _this.wa('touchstart', _this.handleTouchStart, { passive: false });\n      _this.wa('touchmove', _this.handleTouchMove, { passive: false });\n      _this.wa('touchend', _this.handleTouchEnd, { passive: false });\n    };\n\n    _this.unbindMouseEvents = function () {\n      _this.wr('mousedown', _this.handleMouseDown);\n      _this.wr('mouseup', _this.handleMouseUp);\n      _this.wr('mousemove', _this.handleMouseMove);\n    };\n\n    _this.unbindTouchEvents = function () {\n      _this.wr('touchstart', _this.handleTouchStart);\n      _this.wr('touchmove', _this.handleTouchMove);\n      _this.wr('touchend', _this.handleTouchEnd);\n    };\n\n    _this.bindResizeEvent = function () {\n      _this.wa('resize', _this.updateWidthHeight);\n    };\n\n    _this.unbindResizeEvent = function () {\n      _this.wr('resize', _this.updateWidthHeight);\n    };\n\n    _this.bindWheelEvent = function () {\n      if (_this._containerRef) {\n        _this._containerRef.addEventListener('wheel', _this.handleWheel, { passive: false });\n      }\n    };\n\n    _this.unbindWheelEvent = function () {\n      if (_this._containerRef) {\n        _this._containerRef.removeEventListener('wheel', _this.handleWheel);\n      }\n    };\n\n    _this.setCenterZoomTarget = function (center, zoom) {\n      var fromProps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var zoomAround = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      var animationDuration = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : ANIMATION_TIME;\n\n      if (_this.props.animate && (!fromProps || _this.distanceInScreens(center, zoom, _this.state.center, _this.state.zoom) <= _this.props.animateMaxScreens)) {\n        if (_this._isAnimating) {\n          cancelAnimationFrame(_this._animFrame);\n\n          var _this$animationStep = _this.animationStep(performanceNow()),\n              centerStep = _this$animationStep.centerStep,\n              zoomStep = _this$animationStep.zoomStep;\n\n          _this._centerStart = centerStep;\n          _this._zoomStart = zoomStep;\n        } else {\n          _this._isAnimating = true;\n          _this._centerStart = _this.limitCenterAtZoom([_this._lastCenter[0], _this._lastCenter[1]], _this._lastZoom);\n          _this._zoomStart = _this._lastZoom;\n          _this.onAnimationStart();\n        }\n\n        _this._animationStart = performanceNow();\n        _this._animationEnd = _this._animationStart + animationDuration;\n\n        if (zoomAround) {\n          _this._zoomAround = zoomAround;\n          _this._centerTarget = _this.calculateZoomCenter(_this._lastCenter, zoomAround, _this._lastZoom, zoom);\n        } else {\n          _this._zoomAround = null;\n          _this._centerTarget = center;\n        }\n        _this._zoomTarget = zoom;\n\n        _this._animFrame = requestAnimationFrame(_this.animate);\n      } else {\n        _this.stopAnimating();\n\n        if (zoomAround) {\n          var _center = _this.calculateZoomCenter(_this._lastCenter, zoomAround, _this._lastZoom, zoom);\n          _this.setCenterZoom(_center, zoom, fromProps);\n        } else {\n          _this.setCenterZoom(center, zoom, fromProps);\n        }\n      }\n    };\n\n    _this.distanceInScreens = function (centerTarget, zoomTarget, center, zoom) {\n      var _this$state = _this.state,\n          width = _this$state.width,\n          height = _this$state.height;\n\n      // distance in pixels at the current zoom level\n\n      var l1 = _this.latLngToPixel(center, center, zoom);\n      var l2 = _this.latLngToPixel(centerTarget, center, zoom);\n\n      // distance in pixels at the target zoom level (could be the same)\n      var z1 = _this.latLngToPixel(center, center, zoomTarget);\n      var z2 = _this.latLngToPixel(centerTarget, center, zoomTarget);\n\n      // take the average between the two and divide by width or height to get the distance multiplier in screens\n      var w = (Math.abs(l1[0] - l2[0]) + Math.abs(z1[0] - z2[0])) / 2 / width;\n      var h = (Math.abs(l1[1] - l2[1]) + Math.abs(z1[1] - z2[1])) / 2 / height;\n\n      // return the distance\n      return Math.sqrt(w * w + h * h);\n    };\n\n    _this.animationStep = function (timestamp) {\n      var length = _this._animationEnd - _this._animationStart;\n      var progress = Math.max(timestamp - _this._animationStart, 0);\n      var percentage = easeOutQuad(progress / length);\n\n      var zoomDiff = (_this._zoomTarget - _this._zoomStart) * percentage;\n      var zoomStep = _this._zoomStart + zoomDiff;\n\n      if (_this._zoomAround) {\n        var centerStep = _this.calculateZoomCenter(_this._centerStart, _this._zoomAround, _this._zoomStart, zoomStep);\n\n        return { centerStep: centerStep, zoomStep: zoomStep };\n      } else {\n        var _centerStep = [_this._centerStart[0] + (_this._centerTarget[0] - _this._centerStart[0]) * percentage, _this._centerStart[1] + (_this._centerTarget[1] - _this._centerStart[1]) * percentage];\n\n        return { centerStep: _centerStep, zoomStep: zoomStep };\n      }\n    };\n\n    _this.animate = function (timestamp) {\n      if (timestamp >= _this._animationEnd) {\n        _this._isAnimating = false;\n        _this.setCenterZoom(_this._centerTarget, _this._zoomTarget, true);\n        _this.onAnimationStop();\n      } else {\n        var _this$animationStep2 = _this.animationStep(timestamp),\n            centerStep = _this$animationStep2.centerStep,\n            zoomStep = _this$animationStep2.zoomStep;\n\n        _this.setCenterZoom(centerStep, zoomStep);\n        _this._animFrame = requestAnimationFrame(_this.animate);\n      }\n    };\n\n    _this.stopAnimating = function () {\n      if (_this._isAnimating) {\n        _this._isAnimating = false;\n        _this.onAnimationStop();\n        cancelAnimationFrame(_this._animFrame);\n      }\n    };\n\n    _this.limitCenterAtZoom = function (center, zoom) {\n      // [minLat, maxLat, minLng, maxLng]\n      var minMax = _this.getBoundsMinMax(zoom || _this.state.zoom);\n\n      return [Math.max(Math.min(isNaN(center[0]) ? _this.state.center[0] : center[0], minMax[1]), minMax[0]), Math.max(Math.min(isNaN(center[1]) ? _this.state.center[1] : center[1], minMax[3]), minMax[2])];\n    };\n\n    _this.onAnimationStart = function () {\n      _this.props.onAnimationStart && _this.props.onAnimationStart();\n    };\n\n    _this.onAnimationStop = function () {\n      _this.props.onAnimationStop && _this.props.onAnimationStop();\n    };\n\n    _this.setCenterZoom = function (center, zoom) {\n      var animationEnded = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      var limitedCenter = _this.limitCenterAtZoom(center, zoom);\n\n      if (Math.round(_this.state.zoom) !== Math.round(zoom)) {\n        var tileValues = _this.tileValues(_this.state);\n        var nextValues = _this.tileValues({ center: limitedCenter, zoom: zoom, width: _this.state.width, height: _this.state.height });\n        var oldTiles = _this.state.oldTiles;\n\n        _this.setState({\n          oldTiles: oldTiles.filter(function (o) {\n            return o.roundedZoom !== tileValues.roundedZoom;\n          }).concat(tileValues)\n        }, NOOP);\n\n        var loadTracker = {};\n\n        for (var x = nextValues.tileMinX; x <= nextValues.tileMaxX; x++) {\n          for (var y = nextValues.tileMinY; y <= nextValues.tileMaxY; y++) {\n            var key = x + '-' + y + '-' + nextValues.roundedZoom;\n            loadTracker[key] = false;\n          }\n        }\n\n        _this._loadTracker = loadTracker;\n      }\n\n      _this.setState({ center: limitedCenter, zoom: zoom }, NOOP);\n\n      var maybeZoom = _this.props.zoom ? _this.props.zoom : _this._lastZoom;\n      var maybeCenter = _this.props.center ? _this.props.center : _this._lastCenter;\n      if (animationEnded || Math.abs(maybeZoom - zoom) > 0.001 || Math.abs(maybeCenter[0] - limitedCenter[0]) > 0.00001 || Math.abs(maybeCenter[1] - limitedCenter[1]) > 0.00001) {\n        _this._lastZoom = zoom;\n        _this._lastCenter = [].concat(limitedCenter);\n        _this.syncToProps(limitedCenter, zoom);\n      }\n    };\n\n    _this.getBoundsMinMax = function (zoom) {\n      if (_this.props.limitBounds === 'center') {\n        return absoluteMinMax;\n      }\n\n      var _this$state2 = _this.state,\n          width = _this$state2.width,\n          height = _this$state2.height;\n\n\n      if (_this._minMaxCache && _this._minMaxCache[0] === zoom && _this._minMaxCache[1] === width && _this._minMaxCache[2] === height) {\n        return _this._minMaxCache[3];\n      }\n\n      var pixelsAtZoom = Math.pow(2, zoom) * 256;\n\n      var minLng = width > pixelsAtZoom ? 0 : tile2lng(width / 512, zoom); // x\n      var minLat = height > pixelsAtZoom ? 0 : tile2lat(Math.pow(2, zoom) - height / 512, zoom); // y\n\n      var maxLng = width > pixelsAtZoom ? 0 : tile2lng(Math.pow(2, zoom) - width / 512, zoom); // x\n      var maxLat = height > pixelsAtZoom ? 0 : tile2lat(height / 512, zoom); // y\n\n      var minMax = [minLat, maxLat, minLng, maxLng];\n\n      _this._minMaxCache = [zoom, width, height, minMax];\n\n      return minMax;\n    };\n\n    _this.imageLoaded = function (key) {\n      if (_this._loadTracker && key in _this._loadTracker) {\n        _this._loadTracker[key] = true;\n\n        var unloadedCount = Object.keys(_this._loadTracker).filter(function (k) {\n          return !_this._loadTracker[k];\n        }).length;\n\n        if (unloadedCount === 0) {\n          _this.setState({ oldTiles: [] }, NOOP);\n        }\n      }\n    };\n\n    _this.handleTouchStart = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n      if (event.target && parentHasClass(event.target, 'pigeon-drag-block')) {\n        return;\n      }\n      if (event.touches.length === 1) {\n        var touch = event.touches[0];\n        var pixel = getMousePixel(_this._containerRef, touch);\n\n        if (_this.coordsInside(pixel)) {\n          _this._touchStartPixel = [pixel];\n\n          if (!_this.props.twoFingerDrag) {\n            _this.stopAnimating();\n\n            if (_this._lastTap && performanceNow() - _this._lastTap < DOUBLE_CLICK_DELAY) {\n              event.preventDefault();\n              var latLngNow = _this.pixelToLatLng(_this._touchStartPixel[0]);\n              _this.setCenterZoomTarget(null, Math.max(_this.props.minZoom, Math.min(_this.state.zoom + 1, _this.props.maxZoom)), false, latLngNow);\n            } else {\n              _this._lastTap = performanceNow();\n              _this.trackMoveEvents(pixel);\n            }\n          }\n        }\n        // added second finger and first one was in the area\n      } else if (event.touches.length === 2 && _this._touchStartPixel) {\n        event.preventDefault();\n\n        _this.stopTrackingMoveEvents();\n\n        if (_this.state.pixelDelta || _this.state.zoomDelta) {\n          _this.sendDeltaChange();\n        }\n\n        var t1 = getMousePixel(_this._containerRef, event.touches[0]);\n        var t2 = getMousePixel(_this._containerRef, event.touches[1]);\n\n        _this._touchStartPixel = [t1, t2];\n        _this._touchStartMidPoint = [(t1[0] + t2[0]) / 2, (t1[1] + t2[1]) / 2];\n        _this._touchStartDistance = Math.sqrt(Math.pow(t1[0] - t2[0], 2) + Math.pow(t1[1] - t2[1], 2));\n      }\n    };\n\n    _this.handleTouchMove = function (event) {\n      if (!_this._containerRef) {\n        _this._touchStartPixel = null;\n        return;\n      }\n      if (event.touches.length === 1 && _this._touchStartPixel) {\n        var touch = event.touches[0];\n        var pixel = getMousePixel(_this._containerRef, touch);\n\n        if (_this.props.twoFingerDrag) {\n          if (_this.coordsInside(pixel)) {\n            _this.showWarning('fingers');\n          }\n        } else {\n          event.preventDefault();\n          _this.trackMoveEvents(pixel);\n\n          _this.setState({\n            pixelDelta: [pixel[0] - _this._touchStartPixel[0][0], pixel[1] - _this._touchStartPixel[0][1]]\n          }, NOOP);\n        }\n      } else if (event.touches.length === 2 && _this._touchStartPixel) {\n        var _this$state3 = _this.state,\n            width = _this$state3.width,\n            height = _this$state3.height,\n            zoom = _this$state3.zoom;\n\n\n        event.preventDefault();\n\n        var t1 = getMousePixel(_this._containerRef, event.touches[0]);\n        var t2 = getMousePixel(_this._containerRef, event.touches[1]);\n\n        var midPoint = [(t1[0] + t2[0]) / 2, (t1[1] + t2[1]) / 2];\n        var midPointDiff = [midPoint[0] - _this._touchStartMidPoint[0], midPoint[1] - _this._touchStartMidPoint[1]];\n\n        var distance = Math.sqrt(Math.pow(t1[0] - t2[0], 2) + Math.pow(t1[1] - t2[1], 2));\n\n        var zoomDelta = Math.max(_this.props.minZoom, Math.min(_this.props.maxZoom, zoom + Math.log2(distance / _this._touchStartDistance))) - zoom;\n        var scale = Math.pow(2, zoomDelta);\n\n        var centerDiffDiff = [(width / 2 - midPoint[0]) * (scale - 1), (height / 2 - midPoint[1]) * (scale - 1)];\n\n        _this.setState({\n          zoomDelta: zoomDelta,\n          pixelDelta: [centerDiffDiff[0] + midPointDiff[0] * scale, centerDiffDiff[1] + midPointDiff[1] * scale]\n        }, NOOP);\n      }\n    };\n\n    _this.handleTouchEnd = function (event) {\n      if (!_this._containerRef) {\n        _this._touchStartPixel = null;\n        return;\n      }\n      if (_this._touchStartPixel) {\n        var _this$props = _this.props,\n            zoomSnap = _this$props.zoomSnap,\n            twoFingerDrag = _this$props.twoFingerDrag,\n            minZoom = _this$props.minZoom,\n            maxZoom = _this$props.maxZoom;\n        var zoomDelta = _this.state.zoomDelta;\n\n        var _this$sendDeltaChange = _this.sendDeltaChange(),\n            center = _this$sendDeltaChange.center,\n            zoom = _this$sendDeltaChange.zoom;\n\n        if (event.touches.length === 0) {\n          if (twoFingerDrag) {\n            _this.clearWarning();\n          } else {\n            // if the click started and ended at about\n            // the same place we can view it as a click\n            // and not prevent default behavior.\n            var oldTouchPixel = _this._touchStartPixel[0];\n            var newTouchPixel = getMousePixel(_this._containerRef, event.changedTouches[0]);\n\n            if (Math.abs(oldTouchPixel[0] - newTouchPixel[0]) > CLICK_TOLERANCE || Math.abs(oldTouchPixel[1] - newTouchPixel[1]) > CLICK_TOLERANCE) {\n              // don't throw immediately after releasing the second finger\n              if (!_this._secondTouchEnd || performanceNow() - _this._secondTouchEnd > PINCH_RELEASE_THROW_DELAY) {\n                event.preventDefault();\n                _this.throwAfterMoving(newTouchPixel, center, zoom);\n              }\n            }\n\n            _this._touchStartPixel = null;\n            _this._secondTouchEnd = null;\n          }\n        } else if (event.touches.length === 1) {\n          event.preventDefault();\n          var touch = getMousePixel(_this._containerRef, event.touches[0]);\n\n          _this._secondTouchEnd = performanceNow();\n          _this._touchStartPixel = [touch];\n          _this.trackMoveEvents(touch);\n\n          if (zoomSnap) {\n            // if somehow we have no midpoint for the two finger touch, just take the center of the map\n            var latLng = _this._touchStartMidPoint ? _this.pixelToLatLng(_this._touchStartMidPoint) : _this.state.center;\n\n            var zoomTarget = void 0;\n\n            // do not zoom up/down if we must drag with 2 fingers and didn't change the zoom level\n            if (twoFingerDrag && Math.round(_this.state.zoom) === Math.round(_this.state.zoom + zoomDelta)) {\n              zoomTarget = Math.round(_this.state.zoom);\n            } else {\n              zoomTarget = zoomDelta > 0 ? Math.ceil(_this.state.zoom) : Math.floor(_this.state.zoom);\n            }\n            var _zoom = Math.max(minZoom, Math.min(zoomTarget, maxZoom));\n\n            _this.setCenterZoomTarget(latLng, _zoom, false, latLng);\n          }\n        }\n      }\n    };\n\n    _this.handleMouseDown = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n      var pixel = getMousePixel(_this._containerRef, event);\n\n      if (event.button === 0 && (!event.target || !parentHasClass(event.target, 'pigeon-drag-block')) && _this.coordsInside(pixel)) {\n        _this.stopAnimating();\n        event.preventDefault();\n\n        if (_this._lastClick && performanceNow() - _this._lastClick < DOUBLE_CLICK_DELAY) {\n          var latLngNow = _this.pixelToLatLng(_this._mousePosition || pixel);\n          _this.setCenterZoomTarget(null, Math.max(_this.props.minZoom, Math.min(_this.state.zoom + 1, _this.props.maxZoom)), false, latLngNow);\n        } else {\n          _this._lastClick = performanceNow();\n\n          _this._mouseDown = true;\n          _this._dragStart = pixel;\n          _this.trackMoveEvents(pixel);\n        }\n      }\n    };\n\n    _this.handleMouseMove = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n      _this._mousePosition = getMousePixel(_this._containerRef, event);\n\n      if (_this._mouseDown && _this._dragStart) {\n        _this.trackMoveEvents(_this._mousePosition);\n        _this.setState({\n          pixelDelta: [_this._mousePosition[0] - _this._dragStart[0], _this._mousePosition[1] - _this._dragStart[1]]\n        }, NOOP);\n      }\n    };\n\n    _this.handleMouseUp = function (event) {\n      if (!_this._containerRef) {\n        _this._mouseDown = false;\n        return;\n      }\n      var pixelDelta = _this.state.pixelDelta;\n\n\n      if (_this._mouseDown) {\n        _this._mouseDown = false;\n\n        var pixel = getMousePixel(_this._containerRef, event);\n\n        if (_this.props.onClick && (!event.target || !parentHasClass(event.target, 'pigeon-click-block')) && (!pixelDelta || Math.abs(pixelDelta[0]) + Math.abs(pixelDelta[1]) <= CLICK_TOLERANCE)) {\n          var latLng = _this.pixelToLatLng(pixel);\n          _this.props.onClick({ event: event, latLng: latLng, pixel: pixel });\n          _this.setState({ pixelDelta: null }, NOOP);\n        } else {\n          var _this$sendDeltaChange2 = _this.sendDeltaChange(),\n              center = _this$sendDeltaChange2.center,\n              zoom = _this$sendDeltaChange2.zoom;\n\n          _this.throwAfterMoving(pixel, center, zoom);\n        }\n      }\n    };\n\n    _this.stopTrackingMoveEvents = function () {\n      _this._moveEvents = [];\n    };\n\n    _this.trackMoveEvents = function (coords) {\n      var timestamp = performanceNow();\n\n      if (_this._moveEvents.length === 0 || timestamp - _this._moveEvents[_this._moveEvents.length - 1].timestamp > 40) {\n        _this._moveEvents.push({ timestamp: timestamp, coords: coords });\n        if (_this._moveEvents.length > 2) {\n          _this._moveEvents.shift();\n        }\n      }\n    };\n\n    _this.throwAfterMoving = function (coords, center, zoom) {\n      var _this$state4 = _this.state,\n          width = _this$state4.width,\n          height = _this$state4.height;\n      var animate = _this.props.animate;\n\n\n      var timestamp = performanceNow();\n      var lastEvent = _this._moveEvents.shift();\n\n      if (lastEvent && animate) {\n        var deltaMs = Math.max(timestamp - lastEvent.timestamp, 1);\n\n        var delta = [(coords[0] - lastEvent.coords[0]) / deltaMs * 120, (coords[1] - lastEvent.coords[1]) / deltaMs * 120];\n\n        var distance = Math.sqrt(delta[0] * delta[0] + delta[1] * delta[1]);\n\n        if (distance > MIN_DRAG_FOR_THROW) {\n          var diagonal = Math.sqrt(width * width + height * height);\n\n          var throwTime = DIAGONAL_THROW_TIME * distance / diagonal;\n\n          var lng = tile2lng(lng2tile(center[1], zoom) - delta[0] / 256.0, zoom);\n          var lat = tile2lat(lat2tile(center[0], zoom) - delta[1] / 256.0, zoom);\n\n          _this.setCenterZoomTarget([lat, lng], zoom, false, null, throwTime);\n        }\n      }\n\n      _this.stopTrackingMoveEvents();\n    };\n\n    _this.sendDeltaChange = function () {\n      var _this$state5 = _this.state,\n          center = _this$state5.center,\n          zoom = _this$state5.zoom,\n          pixelDelta = _this$state5.pixelDelta,\n          zoomDelta = _this$state5.zoomDelta;\n\n\n      var lat = center[0];\n      var lng = center[1];\n\n      if (pixelDelta || zoomDelta !== 0) {\n        lng = tile2lng(lng2tile(center[1], zoom + zoomDelta) - (pixelDelta ? pixelDelta[0] / 256.0 : 0), zoom + zoomDelta);\n        lat = tile2lat(lat2tile(center[0], zoom + zoomDelta) - (pixelDelta ? pixelDelta[1] / 256.0 : 0), zoom + zoomDelta);\n        _this.setCenterZoom([lat, lng], zoom + zoomDelta);\n      }\n\n      _this.setState({\n        pixelDelta: null,\n        zoomDelta: 0\n      }, NOOP);\n\n      return {\n        center: _this.limitCenterAtZoom([lat, lng], zoom + zoomDelta),\n        zoom: zoom + zoomDelta\n      };\n    };\n\n    _this.getBounds = function () {\n      var center = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.state.center;\n      var zoom = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this.zoomPlusDelta();\n      var _this$state6 = _this.state,\n          width = _this$state6.width,\n          height = _this$state6.height;\n\n\n      return {\n        ne: _this.pixelToLatLng([width - 1, 0], center, zoom),\n        sw: _this.pixelToLatLng([0, height - 1], center, zoom)\n      };\n    };\n\n    _this.syncToProps = function () {\n      var center = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.state.center;\n      var zoom = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this.state.zoom;\n      var onBoundsChanged = _this.props.onBoundsChanged;\n\n\n      if (onBoundsChanged) {\n        var bounds = _this.getBounds(center, zoom);\n\n        onBoundsChanged({ center: center, zoom: zoom, bounds: bounds, initial: !_this._boundsSynced });\n\n        _this._boundsSynced = true;\n      }\n    };\n\n    _this.handleWheel = function (event) {\n      var _this$props2 = _this.props,\n          mouseEvents = _this$props2.mouseEvents,\n          metaWheelZoom = _this$props2.metaWheelZoom,\n          zoomSnap = _this$props2.zoomSnap,\n          animate = _this$props2.animate;\n\n\n      if (!mouseEvents) {\n        return;\n      }\n\n      if (!metaWheelZoom || event.metaKey) {\n        event.preventDefault();\n\n        var addToZoom = -event.deltaY / SCROLL_PIXELS_FOR_ZOOM_LEVEL;\n\n        if (!zoomSnap && _this._zoomTarget) {\n          var stillToAdd = _this._zoomTarget - _this.state.zoom;\n          _this.zoomAroundMouse(addToZoom + stillToAdd, event);\n        } else {\n          if (animate) {\n            _this.zoomAroundMouse(addToZoom, event);\n          } else {\n            if (!_this._lastWheel || performanceNow() - _this._lastWheel > ANIMATION_TIME) {\n              _this._lastWheel = performanceNow();\n              _this.zoomAroundMouse(addToZoom, event);\n            }\n          }\n        }\n      } else {\n        _this.showWarning('wheel');\n      }\n    };\n\n    _this.showWarning = function (warningType) {\n      if (!_this.state.showWarning || _this.state.warningType !== warningType) {\n        _this.setState({ showWarning: true, warningType: warningType });\n      }\n\n      if (_this._warningClearTimeout) {\n        window.clearTimeout(_this._warningClearTimeout);\n      }\n      _this._warningClearTimeout = window.setTimeout(_this.clearWarning, WARNING_DISPLAY_TIMEOUT);\n    };\n\n    _this.clearWarning = function () {\n      if (_this.state.showWarning) {\n        _this.setState({ showWarning: false });\n      }\n    };\n\n    _this.zoomAroundMouse = function (zoomDiff, event) {\n      if (!_this._containerRef) {\n        return;\n      }\n      var zoom = _this.state.zoom;\n      var _this$props3 = _this.props,\n          minZoom = _this$props3.minZoom,\n          maxZoom = _this$props3.maxZoom,\n          zoomSnap = _this$props3.zoomSnap;\n\n\n      _this._mousePosition = getMousePixel(_this._containerRef, event);\n\n      if (!_this._mousePosition || zoom === minZoom && zoomDiff < 0 || zoom === maxZoom && zoomDiff > 0) {\n        return;\n      }\n\n      var latLngNow = _this.pixelToLatLng(_this._mousePosition);\n\n      var zoomTarget = zoom + zoomDiff;\n      if (zoomSnap) {\n        zoomTarget = zoomDiff < 0 ? Math.floor(zoomTarget) : Math.ceil(zoomTarget);\n      }\n      zoomTarget = Math.max(minZoom, Math.min(zoomTarget, maxZoom));\n\n      _this.setCenterZoomTarget(null, zoomTarget, false, latLngNow);\n    };\n\n    _this.zoomPlusDelta = function () {\n      return _this.state.zoom + _this.state.zoomDelta;\n    };\n\n    _this.pixelToLatLng = function (pixel) {\n      var center = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this.state.center;\n      var zoom = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this.zoomPlusDelta();\n      var _this$state7 = _this.state,\n          width = _this$state7.width,\n          height = _this$state7.height,\n          pixelDelta = _this$state7.pixelDelta;\n\n\n      var pointDiff = [(pixel[0] - width / 2 - (pixelDelta ? pixelDelta[0] : 0)) / 256.0, (pixel[1] - height / 2 - (pixelDelta ? pixelDelta[1] : 0)) / 256.0];\n\n      var tileX = lng2tile(center[1], zoom) + pointDiff[0];\n      var tileY = lat2tile(center[0], zoom) + pointDiff[1];\n\n      return [Math.max(absoluteMinMax[0], Math.min(absoluteMinMax[1], tile2lat(tileY, zoom))), Math.max(absoluteMinMax[2], Math.min(absoluteMinMax[3], tile2lng(tileX, zoom)))];\n    };\n\n    _this.latLngToPixel = function (latLng) {\n      var center = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this.state.center;\n      var zoom = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this.zoomPlusDelta();\n      var _this$state8 = _this.state,\n          width = _this$state8.width,\n          height = _this$state8.height,\n          pixelDelta = _this$state8.pixelDelta;\n\n\n      var tileCenterX = lng2tile(center[1], zoom);\n      var tileCenterY = lat2tile(center[0], zoom);\n\n      var tileX = lng2tile(latLng[1], zoom);\n      var tileY = lat2tile(latLng[0], zoom);\n\n      return [(tileX - tileCenterX) * 256.0 + width / 2 + (pixelDelta ? pixelDelta[0] : 0), (tileY - tileCenterY) * 256.0 + height / 2 + (pixelDelta ? pixelDelta[1] : 0)];\n    };\n\n    _this.calculateZoomCenter = function (center, coords, oldZoom, newZoom) {\n      var _this$state9 = _this.state,\n          width = _this$state9.width,\n          height = _this$state9.height;\n\n\n      var pixelBefore = _this.latLngToPixel(coords, center, oldZoom);\n      var pixelAfter = _this.latLngToPixel(coords, center, newZoom);\n\n      var newCenter = _this.pixelToLatLng([width / 2 + pixelAfter[0] - pixelBefore[0], height / 2 + pixelAfter[1] - pixelBefore[1]], center, newZoom);\n\n      return _this.limitCenterAtZoom(newCenter, newZoom);\n    };\n\n    _this.setRef = function (dom) {\n      _this._containerRef = dom;\n    };\n\n    _this.syncToProps = debounce(_this.syncToProps, DEBOUNCE_DELAY);\n\n    _this._mousePosition = null;\n    _this._dragStart = null;\n    _this._mouseDown = false;\n    _this._moveEvents = [];\n    _this._lastClick = null;\n    _this._lastTap = null;\n    _this._touchStartPixel = null;\n\n    _this._isAnimating = false;\n    _this._animationStart = null;\n    _this._animationEnd = null;\n    _this._centerTarget = null;\n    _this._zoomTarget = null;\n\n    // When users are using uncontrolled components we have to keep this\n    // so we can know if we should call onBoundsChanged\n    _this._lastZoom = props.defaultZoom ? props.defaultZoom : props.zoom;\n    _this._lastCenter = props.defaultCenter ? props.defaultCenter : props.center;\n    _this._boundsSynced = false;\n    _this._minMaxCache = null;\n\n    _this.state = {\n      zoom: _this._lastZoom,\n      center: _this._lastCenter,\n      width: props.width || props.defaultWidth,\n      height: props.height || props.defaultHeight,\n      zoomDelta: 0,\n      pixelDelta: null,\n      oldTiles: [],\n      showWarning: false,\n      warningType: null\n    };\n    return _this;\n  }\n\n  Map.prototype.componentDidMount = function componentDidMount() {\n    this.props.mouseEvents && this.bindMouseEvents();\n    this.props.touchEvents && this.bindTouchEvents();\n\n    if (!this.props.width || !this.props.height) {\n      // A height:100% container div often results in height=0 being returned on mount.\n      // So ask again once everything is painted.\n      if (!this.updateWidthHeight()) {\n        requestAnimationFrame(this.updateWidthHeight);\n      }\n      this.bindResizeEvent();\n      this.bindWheelEvent();\n    }\n\n    this.syncToProps();\n  };\n\n  Map.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.props.mouseEvents && this.unbindMouseEvents();\n    this.props.touchEvents && this.unbindTouchEvents();\n\n    if (!this.props.width || !this.props.height) {\n      this.unbindResizeEvent();\n      this.unbindWheelEvent();\n    }\n  };\n\n  Map.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (this.props.mouseEvents !== prevProps.mouseEvents) {\n      this.props.mouseEvents ? this.bindMouseEvents() : this.unbindMouseEvents();\n    }\n\n    if (this.props.touchEvents !== prevProps.touchEvents) {\n      this.props.touchEvents ? this.bindTouchEvents() : this.unbindTouchEvents();\n    }\n\n    if (this.props.width && this.props.width !== prevProps.width) {\n      this.setState({ width: this.props.width });\n    }\n\n    if (this.props.height && this.props.height !== prevProps.height) {\n      this.setState({ height: this.props.height });\n    }\n\n    if (!this.props.center && !this.props.zoom) {\n      // if the user isn't controlling neither zoom nor center we don't have to update.\n      return;\n    }\n    if ((!this.props.center || this.props.center[0] === prevProps.center[0] && this.props.center[1] === prevProps.center[1]) && this.props.zoom === prevProps.zoom) {\n      // if the user is controlling either zoom or center but nothing changed\n      // we don't have to update aswell\n      return;\n    }\n\n    var currentCenter = this._isAnimating ? this._centerTarget : this.state.center;\n    var currentZoom = this._isAnimating ? this._zoomTarget : this.state.zoom;\n\n    var nextCenter = this.props.center || currentCenter; // prevent the rare null errors\n    var nextZoom = this.props.zoom || currentZoom;\n\n    if (Math.abs(nextZoom - currentZoom) > 0.001 || Math.abs(nextCenter[0] - currentCenter[0]) > 0.0001 || Math.abs(nextCenter[1] - currentCenter[1]) > 0.0001) {\n      this.setCenterZoomTarget(nextCenter, nextZoom, true);\n    }\n  };\n\n  // main logic when changing coordinates\n\n\n  Map.prototype.coordsInside = function coordsInside(pixel) {\n    var _state = this.state,\n        width = _state.width,\n        height = _state.height;\n\n\n    if (pixel[0] < 0 || pixel[1] < 0 || pixel[0] >= width || pixel[1] >= height) {\n      return false;\n    }\n\n    var parent = this._containerRef;\n    var pos = parentPosition(parent);\n    var element = document.elementFromPoint(pixel[0] + pos.x, pixel[1] + pos.y);\n\n    return parent === element || parent.contains(element);\n  };\n\n  // https://www.bennadel.com/blog/1856-using-jquery-s-animate-step-callback-function-to-create-custom-animations.htm\n\n\n  // tools\n\n  // ref\n\n  // data to display the tiles\n\n  Map.prototype.tileValues = function tileValues(state) {\n    var center = state.center,\n        zoom = state.zoom,\n        pixelDelta = state.pixelDelta,\n        zoomDelta = state.zoomDelta,\n        width = state.width,\n        height = state.height;\n\n\n    var roundedZoom = Math.round(zoom + (zoomDelta || 0));\n    var zoomDiff = zoom + (zoomDelta || 0) - roundedZoom;\n\n    var scale = Math.pow(2, zoomDiff);\n    var scaleWidth = width / scale;\n    var scaleHeight = height / scale;\n\n    var tileCenterX = lng2tile(center[1], roundedZoom) - (pixelDelta ? pixelDelta[0] / 256.0 / scale : 0);\n    var tileCenterY = lat2tile(center[0], roundedZoom) - (pixelDelta ? pixelDelta[1] / 256.0 / scale : 0);\n\n    var halfWidth = scaleWidth / 2 / 256.0;\n    var halfHeight = scaleHeight / 2 / 256.0;\n\n    var tileMinX = Math.floor(tileCenterX - halfWidth);\n    var tileMaxX = Math.floor(tileCenterX + halfWidth);\n\n    var tileMinY = Math.floor(tileCenterY - halfHeight);\n    var tileMaxY = Math.floor(tileCenterY + halfHeight);\n\n    return {\n      tileMinX: tileMinX,\n      tileMaxX: tileMaxX,\n      tileMinY: tileMinY,\n      tileMaxY: tileMaxY,\n      tileCenterX: tileCenterX,\n      tileCenterY: tileCenterY,\n      roundedZoom: roundedZoom,\n      zoomDelta: zoomDelta || 0,\n      scaleWidth: scaleWidth,\n      scaleHeight: scaleHeight,\n      scale: scale\n    };\n  };\n\n  // display the tiles\n\n  Map.prototype.renderTiles = function renderTiles() {\n    var _this2 = this;\n\n    var oldTiles = this.state.oldTiles;\n    var dprs = this.props.dprs;\n\n    var mapUrl = this.props.provider || wikimedia;\n\n    var _tileValues = this.tileValues(this.state),\n        tileMinX = _tileValues.tileMinX,\n        tileMaxX = _tileValues.tileMaxX,\n        tileMinY = _tileValues.tileMinY,\n        tileMaxY = _tileValues.tileMaxY,\n        tileCenterX = _tileValues.tileCenterX,\n        tileCenterY = _tileValues.tileCenterY,\n        roundedZoom = _tileValues.roundedZoom,\n        scaleWidth = _tileValues.scaleWidth,\n        scaleHeight = _tileValues.scaleHeight,\n        scale = _tileValues.scale;\n\n    var tiles = [];\n\n    for (var i = 0; i < oldTiles.length; i++) {\n      var old = oldTiles[i];\n      var zoomDiff = old.roundedZoom - roundedZoom;\n\n      if (Math.abs(zoomDiff) > 4 || zoomDiff === 0) {\n        continue;\n      }\n\n      var pow = 1 / Math.pow(2, zoomDiff);\n      var xDiff = -(tileMinX - old.tileMinX * pow) * 256;\n      var yDiff = -(tileMinY - old.tileMinY * pow) * 256;\n\n      var _xMin = Math.max(old.tileMinX, 0);\n      var _yMin = Math.max(old.tileMinY, 0);\n      var _xMax = Math.min(old.tileMaxX, Math.pow(2, old.roundedZoom) - 1);\n      var _yMax = Math.min(old.tileMaxY, Math.pow(2, old.roundedZoom) - 1);\n\n      for (var x = _xMin; x <= _xMax; x++) {\n        for (var y = _yMin; y <= _yMax; y++) {\n          tiles.push({\n            key: x + '-' + y + '-' + old.roundedZoom,\n            url: mapUrl(x, y, old.roundedZoom),\n            srcSet: srcSet(dprs, mapUrl, x, y, old.roundedZoom),\n            left: xDiff + (x - old.tileMinX) * 256 * pow,\n            top: yDiff + (y - old.tileMinY) * 256 * pow,\n            width: 256 * pow,\n            height: 256 * pow,\n            active: false\n          });\n        }\n      }\n    }\n\n    var xMin = Math.max(tileMinX, 0);\n    var yMin = Math.max(tileMinY, 0);\n    var xMax = Math.min(tileMaxX, Math.pow(2, roundedZoom) - 1);\n    var yMax = Math.min(tileMaxY, Math.pow(2, roundedZoom) - 1);\n\n    for (var _x13 = xMin; _x13 <= xMax; _x13++) {\n      for (var _y = yMin; _y <= yMax; _y++) {\n        tiles.push({\n          key: _x13 + '-' + _y + '-' + roundedZoom,\n          url: mapUrl(_x13, _y, roundedZoom),\n          srcSet: srcSet(dprs, mapUrl, _x13, _y, roundedZoom),\n          left: (_x13 - tileMinX) * 256,\n          top: (_y - tileMinY) * 256,\n          width: 256,\n          height: 256,\n          active: true\n        });\n      }\n    }\n\n    var boxStyle = {\n      width: scaleWidth,\n      height: scaleHeight,\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      overflow: 'hidden',\n      willChange: 'transform',\n      transform: 'scale(' + scale + ', ' + scale + ')',\n      transformOrigin: 'top left'\n    };\n    var boxClassname = this.props.boxClassname || '';\n\n    var left = -((tileCenterX - tileMinX) * 256 - scaleWidth / 2);\n    var top = -((tileCenterY - tileMinY) * 256 - scaleHeight / 2);\n\n    var tilesStyle = {\n      position: 'absolute',\n      width: (tileMaxX - tileMinX + 1) * 256,\n      height: (tileMaxY - tileMinY + 1) * 256,\n      willChange: 'transform',\n      transform: 'translate(' + left + 'px, ' + top + 'px)'\n    };\n\n    return React__default.createElement(\n      'div',\n      { style: boxStyle, className: boxClassname },\n      React__default.createElement(\n        'div',\n        { style: tilesStyle },\n        tiles.map(function (tile) {\n          return React__default.createElement('img', {\n            key: tile.key,\n            src: tile.url,\n            srcSet: tile.srcSet,\n            width: tile.width,\n            height: tile.height,\n            onLoad: function onLoad() {\n              return _this2.imageLoaded(tile.key);\n            },\n            style: { position: 'absolute', left: tile.left, top: tile.top, willChange: 'transform', transform: tile.transform, transformOrigin: 'top left', opacity: 1 } });\n        })\n      )\n    );\n  };\n\n  Map.prototype.renderOverlays = function renderOverlays() {\n    var _this3 = this;\n\n    var _state2 = this.state,\n        width = _state2.width,\n        height = _state2.height,\n        center = _state2.center;\n\n\n    var mapState = {\n      bounds: this.getBounds(),\n      zoom: this.zoomPlusDelta(),\n      center: center,\n      width: width,\n      height: height\n    };\n\n    var childrenWithProps = React__default.Children.map(this.props.children, function (child) {\n      if (!child) {\n        return null;\n      }\n\n      if (typeof child.type === 'string') {\n        return child;\n      }\n\n      var _child$props = child.props,\n          anchor = _child$props.anchor,\n          position = _child$props.position,\n          offset = _child$props.offset;\n\n\n      var c = _this3.latLngToPixel(anchor || position || center);\n\n      return React__default.cloneElement(child, {\n        left: c[0] - (offset ? offset[0] : 0),\n        top: c[1] - (offset ? offset[1] : 0),\n        latLngToPixel: _this3.latLngToPixel,\n        pixelToLatLng: _this3.pixelToLatLng,\n        mapState: mapState\n      });\n    });\n\n    var childrenStyle = {\n      position: 'absolute',\n      width: width,\n      height: height,\n      top: 0,\n      left: 0\n    };\n\n    return React__default.createElement(\n      'div',\n      { style: childrenStyle },\n      childrenWithProps\n    );\n  };\n\n  Map.prototype.renderAttribution = function renderAttribution() {\n    var _props = this.props,\n        attribution = _props.attribution,\n        attributionPrefix = _props.attributionPrefix;\n\n\n    if (attribution === false) {\n      return null;\n    }\n\n    var style = {\n      position: 'absolute',\n      bottom: 0,\n      right: 0,\n      fontSize: '11px',\n      padding: '2px 5px',\n      background: 'rgba(255, 255, 255, 0.7)',\n      fontFamily: \"'Helvetica Neue', Helvetica, Arial, sans-serif\",\n      color: '#333'\n    };\n\n    var linkStyle = {\n      color: '#0078A8',\n      textDecoration: 'none'\n    };\n\n    return React__default.createElement(\n      'div',\n      { key: 'attr', className: 'pigeon-attribution', style: style },\n      attributionPrefix === false ? null : React__default.createElement(\n        'span',\n        null,\n        attributionPrefix || React__default.createElement(\n          'a',\n          { href: 'https://pigeon-maps.js.org/', style: linkStyle },\n          'Pigeon'\n        ),\n        ' | '\n      ),\n      attribution || React__default.createElement(\n        'span',\n        null,\n        ' © ',\n        React__default.createElement(\n          'a',\n          { href: 'https://www.openstreetmap.org/copyright', style: linkStyle },\n          'OpenStreetMap'\n        ),\n        ' contributors'\n      )\n    );\n  };\n\n  Map.prototype.renderWarning = function renderWarning() {\n    var _props2 = this.props,\n        metaWheelZoom = _props2.metaWheelZoom,\n        metaWheelZoomWarning = _props2.metaWheelZoomWarning,\n        twoFingerDrag = _props2.twoFingerDrag,\n        twoFingerDragWarning = _props2.twoFingerDragWarning,\n        warningZIndex = _props2.warningZIndex;\n    var _state3 = this.state,\n        showWarning = _state3.showWarning,\n        warningType = _state3.warningType,\n        width = _state3.width,\n        height = _state3.height;\n\n\n    if (metaWheelZoom && metaWheelZoomWarning || twoFingerDrag && twoFingerDragWarning) {\n      var style = {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: width,\n        height: height,\n        overflow: 'hidden',\n        pointerEvents: 'none',\n        opacity: showWarning ? 100 : 0,\n        transition: 'opacity 300ms',\n        background: 'rgba(0,0,0,0.5)',\n        color: '#fff',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        fontSize: 22,\n        fontFamily: '\"Arial\", sans-serif',\n        textAlign: 'center',\n        zIndex: warningZIndex\n      };\n\n      var meta = typeof window !== 'undefined' && window.navigator && window.navigator.platform.toUpperCase().indexOf('MAC') >= 0 ? '⌘' : '⊞';\n\n      var warningText = warningType === 'fingers' ? twoFingerDragWarning : metaWheelZoomWarning;\n\n      return React__default.createElement(\n        'div',\n        { style: style },\n        warningText.replace('META', meta)\n      );\n    } else {\n      return null;\n    }\n  };\n\n  Map.prototype.render = function render() {\n    var _props3 = this.props,\n        touchEvents = _props3.touchEvents,\n        twoFingerDrag = _props3.twoFingerDrag;\n    var _state4 = this.state,\n        width = _state4.width,\n        height = _state4.height;\n\n\n    var containerStyle = {\n      width: this.props.width ? width : '100%',\n      height: this.props.height ? height : '100%',\n      position: 'relative',\n      display: 'inline-block',\n      overflow: 'hidden',\n      background: '#dddddd',\n      touchAction: touchEvents ? twoFingerDrag ? 'pan-x pan-y' : 'none' : 'auto'\n    };\n\n    var hasSize = !!(width && height);\n\n    return React__default.createElement(\n      'div',\n      { style: containerStyle, ref: this.setRef },\n      hasSize && this.renderTiles(),\n      hasSize && this.renderOverlays(),\n      hasSize && this.renderAttribution(),\n      hasSize && this.renderWarning()\n    );\n  };\n\n  return Map;\n}(React.Component);\n\nMap.defaultProps = {\n  animate: true,\n  metaWheelZoom: false,\n  metaWheelZoomWarning: 'Use META+wheel to zoom!',\n  twoFingerDrag: false,\n  twoFingerDragWarning: 'Use two fingers to move the map',\n  zoomSnap: true,\n  mouseEvents: true,\n  touchEvents: true,\n  warningZIndex: 100,\n  animateMaxScreens: 5,\n  minZoom: 1,\n  maxZoom: 18,\n  limitBounds: 'center',\n  dprs: []\n};\nprocess.env.NODE_ENV !== \"production\" ? Map.propTypes = {\n  center: PropTypes.array,\n  defaultCenter: PropTypes.array,\n\n  zoom: PropTypes.number,\n  defaultZoom: PropTypes.number,\n\n  width: PropTypes.number,\n  defaultWidth: PropTypes.number,\n\n  height: PropTypes.number,\n  defaultHeight: PropTypes.number,\n\n  provider: PropTypes.func,\n  dprs: PropTypes.array,\n  children: PropTypes.node,\n\n  animate: PropTypes.bool,\n  animateMaxScreens: PropTypes.number,\n\n  minZoom: PropTypes.number,\n  maxZoom: PropTypes.number,\n\n  metaWheelZoom: PropTypes.bool,\n  metaWheelZoomWarning: PropTypes.string,\n  twoFingerDrag: PropTypes.bool,\n  twoFingerDragWarning: PropTypes.string,\n  warningZIndex: PropTypes.number,\n\n  attribution: PropTypes.any,\n  attributionPrefix: PropTypes.any,\n\n  zoomSnap: PropTypes.bool,\n  mouseEvents: PropTypes.bool,\n  touchEvents: PropTypes.bool,\n\n  onClick: PropTypes.func,\n  onBoundsChanged: PropTypes.func,\n  onAnimationStart: PropTypes.func,\n  onAnimationStop: PropTypes.func,\n\n  // will be set to \"edge\" from v0.12 onward, defaulted to \"center\" before\n  limitBounds: PropTypes.oneOf(['center', 'edge'])\n} : void 0;\n\nmodule.exports = Map;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}